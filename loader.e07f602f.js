!function(e){var t=e.Ractive,n=void 0,r=function(){var e,t;return e={el:null,template:"",complete:null,preserveWhitespace:!1,append:!1,twoway:!0,modifyArrays:!0,lazy:!1,debug:!1,noIntro:!1,transitionsEnabled:!0,magic:!1,noCssTransform:!1,adapt:[],sanitize:!1,stripComments:!0,isolated:!1,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],computed:null},t={keys:Object.keys(e),defaults:e}}(n),i=function(){return"undefined"!=typeof document?document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"):void 0}(),s={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},o=function(e,t){return e?function(e,n){return n&&n!==t.html?document.createElementNS(n,e):document.createElement(e)}:function(e,n){if(n&&n!==t.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return document.createElement(e)}}(i,s),u="object"==typeof document,a=function(e){try{return Object.defineProperty({},"test",{value:0}),e&&Object.defineProperty(document.createElement("div"),"test",{value:0}),Object.defineProperty}catch(t){return function(e,t,n){e[t]=n.value}}}(u),f=function(e,t,n){try{try{Object.defineProperties({},{test:{value:0}})}catch(r){throw r}return n&&Object.defineProperties(e("div"),{test:{value:0}}),Object.defineProperties}catch(r){return function(e,n){var r;for(r in n)n.hasOwnProperty(r)&&t(e,r,n[r])}}}(o,a,u),l=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},c=function(e){return function(t,n,r){var i;if("string"!=typeof n||!e(r))throw new Error("Bad arguments");if(i=+t.get(n)||0,!e(i))throw new Error("Cannot add to a non-numeric value");return t.set(n,i+r)}}(l),h=function(e){return function(t,n){return e(this,t,void 0===n?1:+n)}}(c),p=function(e,t){return null===e&&null===t?!0:"object"==typeof e||"object"==typeof t?!1:e===t},d=function(){function e(e){setTimeout(e,0)}function t(e,t){return function(){for(var n;n=e.shift();)n(t)}}function n(e,t,i,s){var o;if(t===e)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(t instanceof r)t.then(i,s);else if(!t||"object"!=typeof t&&"function"!=typeof t)i(t);else{try{o=t.then}catch(u){return void s(u)}if("function"==typeof o){var a,f,l;f=function(t){a||(a=!0,n(e,t,i,s))},l=function(e){a||(a=!0,s(e))};try{o.call(t,f,l)}catch(u){if(!a)return s(u),void (a=!0)}}else i(t)}}var r,i={},s={},o={};return r=function(u){var a,f,l,c,h,p,d=[],v=[],m=i;return l=function(n){return function(r){m===i&&(a=r,m=n,f=t(m===s?d:v,a),e(f))}},c=l(s),h=l(o),u(c,h),p={then:function(t,s){var o=new r(function(r,u){var a=function(e,t,i){t.push("function"==typeof e?function(t){var i;try{i=e(t),n(o,i,r,u)}catch(s){u(s)}}:i)};a(t,d,r),a(s,v,u),m!==i&&e(f)});return o}},p["catch"]=function(e){return this.then(null,e)},p},r.all=function(e){return new r(function(t,n){var r,i,s,o=[];if(!e.length)return void t(o);for(s=function(i){e[i].then(function(e){o[i]=e,--r||t(o)},n)},r=i=e.length;i--;)s(i)})},r.resolve=function(e){return new r(function(t){t(e)})},r.reject=function(e){return new r(function(t,n){n(e)})},r}(),v=function(){var e=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g;return function(t){return(t||"").replace(e,".$1")}}(),m=["o","ms","moz","webkit"],g=function(e){return"undefined"!=typeof window?(function(e,t,n){var r,i;if(!n.requestAnimationFrame){for(r=0;r<e.length&&!n.requestAnimationFrame;++r)n.requestAnimationFrame=n[e[r]+"RequestAnimationFrame"];n.requestAnimationFrame||(i=n.setTimeout,n.requestAnimationFrame=function(e){var n,r,s;return n=Date.now(),r=Math.max(0,16-(n-t)),s=i(function(){e(n+r)},r),t=n+r,s})}}(e,0,window),window.requestAnimationFrame):void 0}(m),y=function(){return"undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?function(){return window.performance.now()}:function(){return Date.now()}}(),b=[],w=function(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)},E=function(e,t,n){var r,i,s,o,u,a="/* Ractive.js component styles */\n",f={},l=[];if(t)return e.push(function(){r=e.runloop}),i=document.createElement("style"),i.type="text/css",s=document.getElementsByTagName("head")[0],u=!1,o=i.styleSheet,{add:function(e){e.css&&(f[e._guid]||(f[e._guid]=0,l.push(e.css),r.scheduleCssUpdate()),f[e._guid]+=1)},remove:function(e){e.css&&(f[e._guid]-=1,f[e._guid]||(n(l,e.css),r.scheduleCssUpdate()))},update:function(){var e;l.length?(e=a+l.join(" "),o?o.cssText=e:i.innerHTML=e,u||s.appendChild(i)):u&&s.removeChild(i)}}}(b,u,w),S=function(e,t){var n,r,i,s,o,u;for(n=[],u=e._rendering?e.fragment.docFrag:e.el,r=u.querySelectorAll('input[type="checkbox"][name="{{'+t+'}}"]'),s=r.length,o=0;s>o;o+=1)i=r[o],(i.hasAttribute("checked")||i.checked)&&n.push(i._ractive.value);return n},x=Object.prototype.hasOwnProperty,T=function(e){do if(e.context)return e.context;while(e=e.parent);return""},N=function(e,t,n,r){var i,s='Could not resolve reference - too many "../" prefixes';return e.push(function(){i=e.get}),function(e,o,u){var a,f,l,c,h,p,d,v,m;if(o=t(o),"."===o)return r(u);if("."===o.charAt(0)){if(a=r(u),f=a?a.split("."):[],"../"===o.substr(0,3)){for(;"../"===o.substr(0,3);){if(!f.length)throw new Error(s);f.pop(),o=o.substring(3)}return f.push(o),f.join(".")}return a?a+o:o.substring(1)}l=o.split("."),c=l.pop(),h=l.length?"."+l.join("."):"";do if(a=u.context,a&&(m=!0,p=a+h,d=i(e,p),(v=e._wrapped[p])&&(d=v.get()),d&&("object"==typeof d||"function"==typeof d)&&c in d))return a+"."+o;while(u=u.parent);return m||e._parent&&!e.isolated?n.call(e.data,o)?o:void 0!==i(e,o)?o:void 0:o}}(b,v,x,T),C=function(e){var t,n,r,i,s=[""];for(t=e.length;t--;)for(n=e[t],r=n.split(".");r.length>1;)r.pop(),i=r.join("."),s[i]!==!0&&(s.push(i),s[i]=!0);return s},k=function(){function e(e,n,r){var s;for(e._patternObservers.length&&i(e,n,n,r,!0),s=0;s<e._deps.length;s+=1)t(e,n,s,r)}function t(e,t,i,s){var o=e._deps[i];o&&(n(o[t]),s||r(e._depsMap[t],e,i))}function n(e){var t,n;if(e)for(n=e.length,t=0;n>t;t+=1)e[t].update()}function r(e,n,r,i){var s;if(e)for(s=e.length;s--;)t(n,e[s],r,i)}function i(e,t,n,r,o){var a,f,l,c,h,p,d,v;for(a=e._patternObservers.length;a--;)f=e._patternObservers[a],f.regex.test(n)&&f.update(n);r||(v=function(t){if(l=e._depsMap[t])for(a=l.length;a--;)c=l[a],h=u.exec(c)[0],p=n?n+"."+h:h,i(e,c,p)},o?(d=s(n),d.forEach(v)):v(t))}function s(e){var t,n,r,i,s,u;for(t=e.split("."),n=o(t.length),s=[],r=function(e,n){return e?"*":t[n]},i=n.length;i--;)u=n[i].map(r).join("."),s[u]||(s.push(u),s[u]=!0);return s}function o(e){var t,n,r,i,s,o="";if(!a[e]){for(r=[];o.length<e;)o+=1;for(t=parseInt(o,2),i=function(e){return"1"===e},s=0;t>=s;s+=1){for(n=s.toString(2);n.length<e;)n="0"+n;r[s]=Array.prototype.map.call(n,i)}a[e]=r}return a[e]}var u,a={};return u=/[^\.]+$/,e.multiple=function(e,n,r){var s,o,u;if(u=n.length,e._patternObservers.length)for(s=u;s--;)i(e,n[s],n[s],r,!0);for(s=0;s<e._deps.length;s+=1)if(e._deps[s])for(o=u;o--;)t(e,n[o],s,r)},e}(),L=function(e){var t,n,r,i;return t=function(e,t){var s=[];return s.detachQueue=[],s.remove=r,s.init=i,s._check=n,s._callback=e,s._previous=t,t&&t.push(s),s},n=function(){var e;if(this._ready&&!this.length){for(;e=this.detachQueue.pop();)e.detach();"function"==typeof this._callback&&this._callback(),this._previous&&this._previous.remove(this)}},r=function(t){e(this,t),this._check()},i=function(){this._ready=!0,this._check()},t}(w),A=function(e,t,n,r,i,s,o,u){function a(){var e,n,r;for(b&&(b.focus(),b=null);e=T.pop();)e.update().deferred=!1;for(;e=w.pop();)e._sort();for(;e=E.pop();)e.init();for(;e=S.pop();)e.init();for(;e=x.pop();)e.update();for(;e=N.pop();)e.active=!1;for(;e=D.pop();)if(D[e._guid]=!1,e._changes.length){for(r={};n=e._changes.pop();)r[n]=h(e,n);e.fire("change",r)}d&&(t.update(),d=!1)}function f(){var e,t,n;for(n=D.length;n--;)e=D[n],e._changes.length&&(t=s(e._changes),o.multiple(e,t,!0));for(l();m;){for(m=!1;e=k.pop();)e.update();for(;e=C.pop();)e.update().deferred=!1;for(;e=L.pop();)e.deferredUpdate();for(;e=O.pop();)p(e.root,e.keypath,r(e.root,e.keypath));for(;e=M.pop();)e.update()}}function l(){var e,t,n;if(_.length)for(e=_.splice(0,_.length);t=e.pop();)t.keypath||(n=i(t.root,t.ref,t.parentFragment),void 0!==n?t.resolve(n):_.push(t))}e.push(function(){h=e.get,p=e.set});var c,h,p,d,v,m=!1,g=!1,y=0,b=null,w=[],E=[],S=[],x=[],T=[],N=[],C=[],k=[],L=[],A={},O=[],M=[],_=[],D=[];return c={start:function(e,t){this.addInstance(e),g||(y+=1,v=u(t,v))},end:function(){return g?void l():(--y||(g=!0,f(),g=!1,a()),v.init(),void (v=v._previous))},trigger:function(){return y||g?void l():(g=!0,f(),g=!1,void a())},focus:function(e){b=e},addInstance:function(e){e&&!D[e._guid]&&(D.push(e),D[D._guid]=!0)},addLiveQuery:function(e){w.push(e)},addDecorator:function(e){E.push(e)},addTransition:function(e){e._manager=v,v.push(e),S.push(e)},addObserver:function(e){x.push(e)},addAttribute:function(e){T.push(e)},addBinding:function(e){e.active=!0,N.push(e)},scheduleCssUpdate:function(){y||g?d=!0:t.update()},addEvaluator:function(e){m=!0,C.push(e)},addComputation:function(e){m=!0,k.push(e)},addSelectValue:function(e){m=!0,L.push(e)},addCheckbox:function(e){A[e.keypath]||(m=!0,O.push(e))},addRadio:function(e){m=!0,M.push(e)},addUnresolved:function(e){m=!0,_.push(e)},removeUnresolved:function(e){n(_,e)},detachWhenReady:function(e){v.detachQueue.push(e)}},e.runloop=c,c}(b,E,w,S,N,C,k,L),O=function(e,t,n){var r=[],i={tick:function(){var s,o,u;for(u=t(),n.start(),s=0;s<r.length;s+=1)o=r[s],o.tick(u)||r.splice(s--,1);n.end(),r.length?e(i.tick):i.running=!1},add:function(t){r.push(t),i.running||(i.running=!0,e(i.tick))},abort:function(e,t){for(var n,i=r.length;i--;)n=r[i],n.root===t&&n.keypath===e&&n.stop()}};return i}(g,y,A),M=function(){var e=Object.prototype.toString;return function(t){return"[object Array]"===e.call(t)}}(),_=function(e){return function(t){var n,r;if(!t||"object"!=typeof t)return t;if(e(t))return t.slice();n={};for(r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}}(M),D={},P=function(e,t,n){switch(t){case"splice":return n;case"sort":case"reverse":return null;case"pop":return e.length?[-1]:null;case"push":return[e.length,0].concat(n);case"shift":return[0,1];case"unshift":return[0,0].concat(n)}},H=function(e,t){var n,r,i,s;return t?(n=+(t[0]<0?e.length+t[0]:t[0]),r=Math.max(0,t.length-2),i=void 0!==t[1]?t[1]:e.length-n,i=Math.min(i,e.length-n),s=r-i,{start:n,balance:s,added:r,removed:i}):null},B={TEXT:1,INTERPOLATOR:2,TRIPLE:3,SECTION:4,INVERTED:5,CLOSING:6,ELEMENT:7,PARTIAL:8,COMMENT:9,DELIMCHANGE:10,MUSTACHE:11,TAG:12,ATTRIBUTE:13,COMPONENT:15,NUMBER_LITERAL:20,STRING_LITERAL:21,ARRAY_LITERAL:22,OBJECT_LITERAL:23,BOOLEAN_LITERAL:24,GLOBAL:26,KEY_VALUE_PAIR:27,REFERENCE:30,REFINEMENT:31,MEMBER:32,PREFIX_OPERATOR:33,BRACKETED:34,CONDITIONAL:35,INFIX_OPERATOR:36,INVOCATION:40},j=function hs(e,t,n){var r,i;if(n||(i=e._wrapped[t])&&i.teardown()!==!1&&(e._wrapped[t]=null),e._cache[t]=void 0,r=e._cacheMap[t])for(;r.length;)hs(e,r.pop())},F=function(){var e=/^\s*[0-9]+\s*$/;return function(t){return e.test(t)?[]:{}}}(),I=function(e,t,n,r,i){function s(e,u,a,f){var l,c,h,p,d,v,m,g;t(e._cache[u],a)||(d=e._computations[u],v=e._wrapped[u],m=e._evaluators[u],d&&!d.setting&&d.set(a),v&&v.reset&&(g=v.reset(a)!==!1,g&&(a=v.get())),m&&(m.value=a),d||m||g||(l=u.split("."),c=l.pop(),h=l.join("."),v=e._wrapped[h],v&&v.set?v.set(c,a):(p=v?v.get():o(e,h),p||(p=n(c),s(e,h,p,!0)),p[c]=a)),r(e,u,g),f||(e._changes.push(u),i(e,u)))}var o;return e.push(function(){o=e.get}),e.set=s,s}(b,p,F,j,k),q=function(e,t,n,r){return function(i,s,o,u){var a,f,l,c,h,p,d,v,m,g;if(a=i.root,f=i.keypath,a._changes.push(f),"sort"===o||"reverse"===o)return void r(a,f,s);if(u){for(l=u.balance?s.length-Math.min(u.balance,0):u.added,h=u.start;l>h;h+=1)t(a,f+"."+h);if(c=function(t){t.keypath===f&&t.type===e.SECTION&&!t.inverted&&t.docFrag?t.splice(u):t.update()},a._deps.forEach(function(e){var t=e[f];t&&t.forEach(c)}),u.added&&u.removed)for(p=Math.max(u.added,u.removed),d=u.start,v=d+p,g=u.added===u.removed,h=d;v>h;h+=1)m=f+"."+h,n(a,m);g||(t(a,f+".length"),n(a,f+".length",!0))}}}(B,j,k,I),R=function(e,t,n,r,i){var s,o,u,a=[],f=["pop","push","reverse","shift","sort","splice","unshift"];return f.forEach(function(s){var o=function(){var t,o,u,a,f;for(t=n(this,s,Array.prototype.slice.call(arguments)),o=r(this,t),u=Array.prototype[s].apply(this,arguments),this._ractive.setting=!0,f=this._ractive.wrappers.length;f--;)a=this._ractive.wrappers[f],e.start(a.root),i(a,this,s,o),e.end();return this._ractive.setting=!1,u};t(a,s,{value:o})}),s={},s.__proto__?(o=function(e){e.__proto__=a},u=function(e){e.__proto__=Array.prototype}):(o=function(e){var n,r;for(n=f.length;n--;)r=f[n],t(e,r,{value:a[r],configurable:!0})},u=function(e){var t;for(t=f.length;t--;)delete e[f[t]]}),o.unpatch=u,o}(A,a,P,H,q),U=function(e,t,n){var r,i,s;return r={filter:function(e){return t(e)&&(!e._ractive||!e._ractive.setting)},wrap:function(e,t,n){return new i(e,t,n)}},i=function(t,r,i){this.root=t,this.value=r,this.keypath=i,r._ractive||(e(r,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),n(r)),r._ractive.instances[t._guid]||(r._ractive.instances[t._guid]=0,r._ractive.instances.push(t)),r._ractive.instances[t._guid]+=1,r._ractive.wrappers.push(this)},i.prototype={get:function(){return this.value},teardown:function(){var e,t,r,i,o;if(e=this.value,t=e._ractive,r=t.wrappers,i=t.instances,t.setting)return!1;if(o=r.indexOf(this),-1===o)throw new Error(s);if(r.splice(o,1),r.length){if(i[this.root._guid]-=1,!i[this.root._guid]){if(o=i.indexOf(this.root),-1===o)throw new Error(s);i.splice(o,1)}}else delete e._ractive,n.unpatch(this.value)}},s="Something went wrong in a rather interesting way",r}(a,M,R),z=function(e,t,n,r,i){function s(t,n,s){function o(t){var s,o;t.value=n,t.updating||(o=t.ractive,s=t.keypath,t.updating=!0,e.start(o),o._changes.push(s),r(o,s),i(o,s),e.end(),t.updating=!1)}var u,a,f,l,c,h;if(u=t.obj,a=t.prop,s&&!s.configurable){if("length"===a)return;throw new Error('Cannot use magic mode with property "'+a+'" - object is not configurable')}s&&(f=s.get,l=s.set),c=f||function(){return n},h=function(e){l&&l(e),n=f?f():e,h._ractiveWrappers.forEach(o)},h._ractiveWrappers=[t],Object.defineProperty(u,a,{get:c,set:h,enumerable:!0,configurable:!0})}var o,u;try{Object.defineProperty({},"test",{value:0})}catch(a){return!1}return o={filter:function(e,t,r){var i,s,o,u,a;return t?(i=t.split("."),s=i.pop(),o=i.join("."),(u=r._wrapped[o])&&!u.magic?!1:(a=r.get(o),n(a)&&/^[0-9]+$/.test(s)?!1:a&&("object"==typeof a||"function"==typeof a))):!1},wrap:function(e,t,n){return new u(e,t,n)}},u=function(e,t,n){var r,i,o,u;return this.magic=!0,this.ractive=e,this.keypath=n,this.value=t,r=n.split("."),this.prop=r.pop(),i=r.join("."),this.obj=i?e.get(i):e.data,o=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop),o&&o.set&&(u=o.set._ractiveWrappers)?void (-1===u.indexOf(this)&&u.push(this)):void s(this,t,o)},u.prototype={get:function(){return this.value},reset:function(e){this.updating||(this.updating=!0,this.obj[this.prop]=e,r(this.ractive,this.keypath),this.updating=!1)},set:function(e,n){this.updating||(this.obj[this.prop]||(this.updating=!0,this.obj[this.prop]=t(e),this.updating=!1),this.obj[this.prop][e]=n)},teardown:function(){var e,t,n,r,i;return this.updating?!1:(e=Object.getOwnPropertyDescriptor(this.obj,this.prop),t=e&&e.set,void (t&&(r=t._ractiveWrappers,i=r.indexOf(this),-1!==i&&r.splice(i,1),r.length||(n=this.obj[this.prop],Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0}),this.obj[this.prop]=n))))}},o}(A,F,M,j,k),W=function(e,t){if(!e)return!1;var n,r;return n={filter:function(n,r,i){return e.filter(n,r,i)&&t.filter(n)},wrap:function(e,t,n){return new r(e,t,n)}},r=function(n,r,i){this.value=r,this.magic=!0,this.magicWrapper=e.wrap(n,r,i),this.arrayWrapper=t.wrap(n,r,i)},r.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown(),this.magicWrapper.teardown()},reset:function(e){return this.magicWrapper.reset(e)}},n}(z,U),X=function(e,t,n,r){function i(e,t){var n,r={};if(!t)return e;t+=".";for(n in e)e.hasOwnProperty(n)&&(r[t+n]=e[n]);return r}function s(e){var t;return o[e]||(t=e?e+".":"",o[e]=function(n,r){var s;return"string"==typeof n?(s={},s[t+n]=r,s):"object"==typeof n?t?i(n,e):n:void 0}),o[e]}var o={};return function(i,o,u,a){var f,l,c,h;for(f=i.adapt.length,l=0;f>l;l+=1){if(c=i.adapt[l],"string"==typeof c){if(!e[c])throw new Error('Missing adaptor "'+c+'"');c=i.adapt[l]=e[c]}if(c.filter(u,o,i))return h=i._wrapped[o]=c.wrap(i,u,o,s(o)),h.value=u,u}return a||(i.magic?r.filter(u,o,i)?i._wrapped[o]=r.wrap(i,u,o):n.filter(u,o,i)&&(i._wrapped[o]=n.wrap(i,u,o)):i.modifyArrays&&t.filter(u,o,i)&&(i._wrapped[o]=t.wrap(i,u,o))),u}}(D,U,z,W),V=function(){function e(e,t){var n,r,i;for(n=t.split(".");n.length;)n.pop(),r=n.join("."),i=e._depsMap[r]||(e._depsMap[r]=[]),void 0===i[t]&&(i[t]=0,i[i.length]=t),i[t]+=1,t=r}return function(t){var n,r,i,s,o;i=t.root,s=t.keypath,o=t.priority,n=i._deps[o]||(i._deps[o]={}),r=n[s]||(n[s]=[]),r.push(t),t.registered=!0,s&&e(i,s)}}(),$=function(){function e(e,t){var n,r,i;for(n=t.split(".");n.length;)n.pop(),r=n.join("."),i=e._depsMap[r],i[t]-=1,i[t]||(i.splice(i.indexOf(t),1),i[t]=void 0),t=r}return function(t){var n,r,i,s,o;if(i=t.root,s=t.keypath,o=t.priority,n=i._deps[o][s],r=n.indexOf(t),-1===r||!t.registered)throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");n.splice(r,1),t.registered=!1,s&&e(i,s)}}(),J=function(e,t,n,r,i,s){var o,u;e.push(function(){o=e.get,u=e.set});var a=function(e,t,n,r,s){this.root=e,this.keypath=t,this.priority=s,this.otherInstance=n,this.otherKeypath=r,i(this),this.value=o(this.root,this.keypath)};return a.prototype={update:function(){var e;this.updating||this.counterpart&&this.counterpart.updating||(e=o(this.root,this.keypath),n(e)&&e._ractive&&e._ractive.setting||r(e,this.value)||(this.updating=!0,t.addInstance(this.otherInstance),u(this.otherInstance,this.otherKeypath,e),this.value=e,this.updating=!1))},reassign:function(e){s(this),s(this.counterpart),this.keypath=e,this.counterpart.otherKeypath=e,i(this),i(this.counterpart)},teardown:function(){s(this)}},function(e,t,n,r){var i,s,o,u,f,l;i=n+"="+r,o=e.bindings,o[i]||(o[i]=!0,s=e.instance,u=e.parentFragment.priority,f=new a(t,n,s,r,u),o.push(f),s.twoway&&(l=new a(s,r,t,n,1),o.push(l),f.counterpart=l,l.counterpart=f))}}(b,A,M,p,V,$),K=function(e,t,n){function r(e,r,i,s,o){n(r,s,o,!0),t(r.component,e,i,s)}var i;return e.push(function(){i=e.get}),function(e,t){var n,s,o,u,a;if(n=e._parent,s=e.component.parentFragment,s.indexRefs&&void 0!==(a=s.indexRefs[t]))return e.component.indexRefBindings[t]=t,a;do if(s.context&&(o=s.context+"."+t,u=i(n,o),void 0!==u))return r(n,e,o,t,u),u;while(s=s.parent);return u=i(n,t),void 0!==u?(r(n,e,t,t,u),u):void 0}}(b,J,I),Q={FAILED_LOOKUP:!0},G=function(e,t,n,r,i,s){function o(e,t,n){var o,a,f,l,c=e._cache;return void 0===c[t]?((a=e._computations[t])?o=a.value:(f=e._wrapped[t])?o=f.value:t?o=(l=e._evaluators[t])?l.value:u(e,t):(r(e,"",e.data),o=e.data),c[t]=o):o=c[t],o===s&&(o=e._parent&&!e.isolated?i(e,t,n):void 0),n&&n.evaluateWrapped&&(f=e._wrapped[t])&&(o=f.get()),o}function u(e,i){var u,a,f,l,c,h,p,d;return u=i.split("."),a=u.pop(),f=u.join("."),l=o(e,f),(p=e._wrapped[f])&&(l=p.get()),null!==l&&void 0!==l?((c=e._cacheMap[f])?-1===c.indexOf(i)&&c.push(i):e._cacheMap[f]=[i],"object"!=typeof l||a in l?(d=!t.call(l,a),h=d?n(l[a]):l[a],h=r(e,i,h,!1),e._cache[i]=h,h):e._cache[i]=s):void 0}return e.get=o,o}(b,x,_,X,K,Q),Y=function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply?function(){console.warn.apply(console,arguments)}:function(){}}(),Z=function(){var e=Object.prototype.toString;return function(t){return"object"==typeof t&&"[object Object]"===e.call(t)}}(),et=function(e,t,n,r,i){var s,o,u;return e.push(function(){o=e.interpolate}),u=/^([+-]?[0-9]+\.?(?:[0-9]+)?)(px|em|ex|%|in|cm|mm|pt|pc)$/,s={number:function(e,t){var n;return i(e)&&i(t)?(e=+e,t=+t,n=t-e,n?function(t){return e+t*n}:function(){return e}):null},array:function(e,t){var r,i,s,u;if(!n(e)||!n(t))return null;for(r=[],i=[],u=s=Math.min(e.length,t.length);u--;)i[u]=o(e[u],t[u]);for(u=s;u<e.length;u+=1)r[u]=e[u];for(u=s;u<t.length;u+=1)r[u]=t[u];return function(e){for(var t=s;t--;)r[t]=i[t](e);return r}},object:function(e,n){var i,s,u,a,f;if(!r(e)||!r(n))return null;i=[],a={},u={};for(f in e)t.call(e,f)&&(t.call(n,f)?(i.push(f),u[f]=o(e[f],n[f])):a[f]=e[f]);for(f in n)t.call(n,f)&&!t.call(e,f)&&(a[f]=n[f]);return s=i.length,function(e){for(var t,n=s;n--;)t=i[n],a[t]=u[t](e);return a}},cssLength:function(e,t){var n,r,i,s,o,a,f,l;return 0!==e&&"string"!=typeof e||0!==t&&"string"!=typeof t?null:(n=u.exec(e),r=u.exec(t),i=n?n[2]:"",s=r?r[2]:"",i&&s&&i!==s?null:(f=i||s,o=n?+n[1]:0,a=r?+r[1]:0,l=a-o,l?function(e){return o+e*l+f}:function(){return o+f}))}}}(b,x,M,Z,l),tt=function(e,t,n){function r(e){return function(){return e}}var i=function(e,i,s,o){if(e===i)return r(i);if(o){if(s.interpolators[o])return s.interpolators[o](e,i)||r(i);t('Missing "'+o+'" interpolator. You may need to download a plugin from [TODO]')}return n.number(e,i)||n.array(e,i)||n.object(e,i)||n.cssLength(e,i)||r(i)};return e.interpolate=i,i}(b,Y,et),nt=function(e,t,n,r){var i=function(e){var t;this.startTime=Date.now();for(t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);this.interpolator=n(this.from,this.to,this.root,this.interpolator),this.running=!0};return i.prototype={tick:function(){var n,i,s,o,u,a;return a=this.keypath,this.running?(o=Date.now(),n=o-this.startTime,n>=this.duration?(null!==a&&(t.start(this.root),r(this.root,a,this.to),t.end()),this.step&&this.step(1,this.to),this.complete(this.to),u=this.root._animations.indexOf(this),-1===u&&e("Animation was not found"),this.root._animations.splice(u,1),this.running=!1,!1):(i=this.easing?this.easing(n/this.duration):n/this.duration,null!==a&&(s=this.interpolator(i),t.start(this.root),r(this.root,a,s),t.end()),this.step&&this.step(i,s),!0)):!1},stop:function(){var t;this.running=!1,t=this.root._animations.indexOf(this),-1===t&&e("Animation was not found"),this.root._animations.splice(t,1)}},i}(Y,A,tt,I),rt=function(e,t,n,r,i,s){function o(t,o,u,f){var l,c,h,p;return o&&(o=n(o)),null!==o&&(p=i(t,o)),r.abort(o,t),e(p,u)?(f.complete&&f.complete(f.to),a):(f.easing&&(l="function"==typeof f.easing?f.easing:t.easing[f.easing],"function"!=typeof l&&(l=null)),c=void 0===f.duration?400:f.duration,h=new s({keypath:o,from:p,to:u,root:t,duration:c,easing:l,interpolator:f.interpolator,step:f.step,complete:f.complete}),r.add(h),t._animations.push(h),h)}var u=function(){},a={stop:u};return function(e,n,r){var i,s,a,f,l,c,h,p,d,v,m,g,y,b;if(i=new t(function(e){s=e}),"object"==typeof e){r=n||{},c=r.easing,h=r.duration,l=[],p=r.step,d=r.complete,(p||d)&&(m={},r.step=null,r.complete=null,v=function(e){return function(t,n){m[e]=n}});for(a in e)e.hasOwnProperty(a)&&((p||d)&&(g=v(a),r={easing:c,duration:h},p&&(r.step=g)),r.complete=d?g:u,l.push(o(this,a,e[a],r)));return(p||d)&&(b={easing:c,duration:h},p&&(b.step=function(e){p(e,m)}),d&&i.then(function(e){d(e,m)}),b.complete=s,y=o(this,null,null,b),l.push(y)),{stop:function(){for(var e;e=l.pop();)e.stop();y&&y.stop()}}}return r=r||{},r.complete&&i.then(r.complete),r.complete=s,f=o(this,e,n,r),i.stop=function(){f.stop()},i}}(p,d,v,O,G,nt),it=function(){return this.fragment.detach()},st=function(e){return this.el?this.fragment.find(e):null},ot=function(e,t,n){var r,i,s,o,u,a,f;if(e){for(r=n("div"),i=["matches","matchesSelector"],f=function(e){return function(t,n){return t[e](n)}},u=i.length;u--;){if(s=i[u],r[s])return f(s);for(a=t.length;a--;)if(o=t[u]+s.substr(0,1).toUpperCase()+s.substring(1),r[o])return f(o)}return function(e,t){var n,r;for(n=(e.parentNode||e.document).querySelectorAll(t),r=n.length;r--;)if(n[r]===e)return!0;return!1}}}(u,m,o),ut=function(e){return function(t,n){var r=this._isComponentQuery?!this.selector||t.name===this.selector:e(t.node,this.selector);return r?(this.push(t.node||t.instance),n||this._makeDirty(),!0):void 0}}(ot),at=function(){var e,t,n;e=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"],t=this.selector,n=e.indexOf(t),-1!==n&&(e.splice(n,1),e[t]=null)},ft=function(){function e(e){var t;return(t=e.parentFragment)?t.owner:e.component&&(t=e.component.parentFragment)?t.owner:void 0}function t(t){var n,r;for(n=[t],r=e(t);r;)n.push(r),r=e(r);return n}return function(e,n){var r,i,s,o,u,a,f,l,c,h;for(r=t(e.component||e._ractive.proxy),i=t(n.component||n._ractive.proxy),s=r[r.length-1],o=i[i.length-1];s&&s===o;)r.pop(),i.pop(),u=s,s=r[r.length-1],o=i[i.length-1];if(s=s.component||s,o=o.component||o,c=s.parentFragment,h=o.parentFragment,c===h)return a=c.items.indexOf(s),f=h.items.indexOf(o),a-f||r.length-i.length;if(l=u.fragments)return a=l.indexOf(c),f=l.indexOf(h),a-f||r.length-i.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")}}(),lt=function(e){return function(t,n){var r;return t.compareDocumentPosition?(r=t.compareDocumentPosition(n),2&r?1:-1):e(t,n)}}(ft),ct=function(e,t){return function(){this.sort(this._isComponentQuery?t:e),this._dirty=!1}}(lt,ft),ht=function(e){return function(){this._dirty||(e.addLiveQuery(this),this._dirty=!0)}}(A),pt=function(e){var t=this.indexOf(this._isComponentQuery?e.instance:e);-1!==t&&this.splice(t,1)},dt=function(e,t,n,r,i,s){return function(o,u,a,f){var l=[];return e(l,{selector:{value:u},live:{value:a},_isComponentQuery:{value:f},_test:{value:t}}),a?(e(l,{cancel:{value:n},_root:{value:o},_sort:{value:r},_makeDirty:{value:i},_remove:{value:s},_dirty:{value:!1,writable:!0}}),l):l}}(f,ut,at,ct,ht,pt),vt=function(e){return function(t,n){var r,i;return this.el?(n=n||{},r=this._liveQueries,(i=r[t])?n&&n.live?i:i.slice():(i=e(this,t,!!n.live,!1),i.live&&(r.push(t),r[t]=i),this.fragment.findAll(t,i),i)):[]}}(dt),mt=function(e){return function(t,n){var r,i;return n=n||{},r=this._liveComponentQueries,(i=r[t])?n&&n.live?i:i.slice():(i=e(this,t,!!n.live,!0),i.live&&(r.push(t),r[t]=i),this.fragment.findAllComponents(t,i),i)}}(dt),gt=function(e){return this.fragment.findComponent(e)},yt=function(e){var t,n,r,i=this._subs[e];if(i)for(t=Array.prototype.slice.call(arguments,1),n=0,r=i.length;r>n;n+=1)i[n].apply(this,t)},bt=function(e,t,n,r){var i,s={};e.push(function(){i=e.get});var o=function(e,t){this.root=e,this.ref=t,this.parentFragment=s,e._unresolvedImplicitDependencies[t]=!0,e._unresolvedImplicitDependencies.push(this),n.addUnresolved(this)};return o.prototype={resolve:function(){var e=this.root;r(e,this.ref),e._unresolvedImplicitDependencies[this.ref]=!1,t(e._unresolvedImplicitDependencies,this)},teardown:function(){n.removeUnresolved(this)}},o}(b,w,A,k),wt=function(e,t,n){var r={isTopLevel:!0};return function(i){var s;return i=e(i),s=t(this,i,r),this._captured&&this._captured[i]!==!0&&(this._captured.push(i),this._captured[i]=!0,void 0===s&&this._unresolvedImplicitDependencies[i]!==!0&&new n(this,i)),s}}(v,G,bt),Et=function(e){var t;return"undefined"!=typeof window&&document&&e?e.nodeType?e:"string"==typeof e&&(t=document.getElementById(e),!t&&document.querySelector&&(t=document.querySelector(e)),t&&t.nodeType)?t:e[0]&&e[0].nodeType?e[0]:null:null},St=function(e){return function(t,n){if(t=e(t),n=e(n)||null,!t)throw new Error("You must specify a valid target to insert into");t.insertBefore(this.detach(),n),this.fragment.pNode=this.el=t}}(Et),xt=function(e,t){var n,r,i,s;return n={},r=0,i=e.map(function(e,i){var o,u,a;u=r,a=t.length;do{if(o=t.indexOf(e,u),-1===o)return s=!0,-1;u=o+1}while(n[o]&&a>u);return o===r&&(r+=1),o!==i&&(s=!0),n[o]=!0,o}),i.unchanged=!s,i},Tt=function(e,t){return function(n,r,i,s){var o;n._changes.push(r),o=function(t){t.type===e.REFERENCE?t.update():t.keypath===r&&t.type===e.SECTION&&!t.inverted&&t.docFrag?t.merge(i):t.update()},n._deps.forEach(function(e){var t=e[r];t&&t.forEach(o)}),s||t(n,r+".length",!0)}}(B,k),Nt=function(e,t,n,r,i,s,o){function u(e){return JSON.stringify(e)}function a(e){if(e===!0)return u;if("string"==typeof e)return f[e]||(f[e]=function(t){return t[e]}),f[e];if("function"==typeof e)return e;throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")}var f={};return function(u,f,l){var c,h,p,d,v,m,g,y;if(c=this.get(u),!n(c)||!n(f))return this.set(u,f,l&&l.complete);if(v=c.length===f.length,l&&l.compare){d=a(l.compare);try{h=c.map(d),p=f.map(d)}catch(b){if(this.debug)throw b;t("Merge operation: comparison failed. Falling back to identity checking"),h=c,p=f}}else h=c,p=f;return m=s(h,p),g=new r(function(e){y=e}),e.start(this,y),i(this,u,f,!0),o(this,u,m,v),e.end(),l&&l.complete&&g.then(l.complete),g}}(A,Y,M,d,I,xt,Tt),Ct=function(e,t,n){var r=function(e,t,n,r){var i=this;this.root=e,this.keypath=t,this.callback=n,this.defer=r.defer,this.debug=r.debug,this.proxy={update:function(){i.reallyUpdate()}},this.priority=0,this.context=r&&r.context?r.context:e};return r.prototype={init:function(e){e!==!1?this.update():this.value=n(this.root,this.keypath)},update:function(){return this.defer&&this.ready?void e.addObserver(this.proxy):void this.reallyUpdate()},reallyUpdate:function(){var e,r;if(e=this.value,r=n(this.root,this.keypath),this.value=r,!this.updating){if(this.updating=!0,!t(r,e)||!this.ready)try{this.callback.call(this.context,r,e,this.keypath)}catch(i){if(this.debug||this.root.debug)throw i}this.updating=!1}}},r}(A,p,G),kt=function(e){return function(t,n){var r,i,s,o,u,a,f;for(r=n.split("."),o=[],a=function(n){var r,i;r=t._wrapped[n]?t._wrapped[n].get():t.get(n);for(i in r)!r.hasOwnProperty(i)||"_ractive"===i&&e(r)||u.push(n+"."+i)},f=function(e){return e+"."+i};i=r.shift();)"*"===i?(u=[],o.forEach(a),o=u):o[0]?o=o.map(f):o[0]=i;return s={},o.forEach(function(e){s[e]=t.get(e)}),s}}(M),Lt=function(e,t,n,r){var i,s=/\*/;return i=function(e,t,n,r){this.root=e,this.callback=n,this.defer=r.defer,this.debug=r.debug,this.keypath=t,this.regex=new RegExp("^"+t.replace(/\./g,"\\.").replace(/\*/g,"[^\\.]+")+"$"),this.values={},this.defer&&(this.proxies=[]),this.priority="pattern",this.context=r&&r.context?r.context:e},i.prototype={init:function(e){var t,n;if(t=r(this.root,this.keypath),e!==!1)for(n in t)t.hasOwnProperty(n)&&this.update(n);else this.values=t},update:function(t){var n;if(!s.test(t))return this.defer&&this.ready?void e.addObserver(this.getProxy(t)):void this.reallyUpdate(t);n=r(this.root,t);for(t in n)n.hasOwnProperty(t)&&this.update(t)},reallyUpdate:function(e){var r=n(this.root,e);if(this.updating)return void (this.values[e]=r);if(this.updating=!0,!t(r,this.values[e])||!this.ready){try{this.callback.call(this.context,r,this.values[e],e)}catch(i){if(this.debug||this.root.debug)throw i}this.values[e]=r}this.updating=!1},getProxy:function(e){var t=this;return this.proxies[e]||(this.proxies[e]={update:function(){t.reallyUpdate(e)}}),this.proxies[e]}},i}(A,p,G,kt),At=function(e,t,n,r,i){var s=/\*/,o={};return function(u,a,f,l){var c,h;return a=e(a),l=l||o,s.test(a)?(c=new i(u,a,f,l),u._patternObservers.push(c),h=!0):c=new r(u,a,f,l),t(c),c.init(l.init),c.ready=!0,{cancel:function(){var e;h&&(e=u._patternObservers.indexOf(c),-1!==e&&u._patternObservers.splice(e,1)),n(c)}}}}(v,V,$,Ct,Lt),Ot=function(e,t){return function(n,r,i){var s,o,u,a;if(e(n)){i=r,o=n,s=[];for(n in o)o.hasOwnProperty(n)&&(r=o[n],s.push(this.observe(n,r,i)));return{cancel:function(){for(;s.length;)s.pop().cancel()}}}if("function"==typeof n)return i=r,r=n,n="",t(this,n,r,i);if(u=n.split(" "),1===u.length)return t(this,n,r,i);for(s=[],a=u.length;a--;)n=u[a],n&&s.push(t(this,n,r,i));return{cancel:function(){for(;s.length;)s.pop().cancel()}}}}(Z,At),Mt=function(e,t){var n,r;if(!t)if(e)this._subs[e]=[];else for(e in this._subs)delete this._subs[e];n=this._subs[e],n&&(r=n.indexOf(t),-1!==r&&n.splice(r,1))},_t=function(e,t){var n,r,i=this;if("object"==typeof e){n=[];for(r in e)e.hasOwnProperty(r)&&n.push(this.on(r,e[r]));return{cancel:function(){for(var e;e=n.pop();)e.cancel()}}}return this._subs[e]?this._subs[e].push(t):this._subs[e]=[t],{cancel:function(){i.off(e,t)}}},Dt=function(){var e;try{Object.create(null),e=Object.create}catch(t){e=function(){var e=function(){};return function(t,n){var r;return null===t?{}:(e.prototype=t,r=new e,n&&Object.defineProperties(r,n),r)}}()}return e}(),Pt=function(e,t){return function(n,r){var i,s,o,u,a;if(n.owner=r.owner,o=n.parent=n.owner.parentFragment,n.root=r.root,n.pNode=r.pNode,n.pElement=r.pElement,n.context=r.context,n.owner.type===e.SECTION&&(n.index=r.index),o&&(u=o.indexRefs)){n.indexRefs=t(null);for(a in u)n.indexRefs[a]=u[a]}for(n.priority=o?o.priority+1:1,r.indexRef&&(n.indexRefs||(n.indexRefs={}),n.indexRefs[r.indexRef]=r.index),n.items=[],i=r.descriptor?r.descriptor.length:0,s=0;i>s;s+=1)n.items[n.items.length]=n.createItem({parentFragment:n,pElement:r.pElement,descriptor:r.descriptor[s],index:s})}}(B,Dt),Ht=function(e,t){return e.substr(0,t.length+1)===t+"."},Bt=function(e){return function(t,n){return t===n||e(t,n)}}(Ht),jt=function(e){return function(t,n,r){return t===n?r:e(t,n)?t.replace(n+".",r+"."):void 0}}(Ht),Ft=function(e,t){return function(n,r,i,s){n[r]&&!e(n[r],s)&&(n[r]=t(n[r],i,s))}}(Bt,jt),It=function(e){return function(t,n,r,i){void 0===this.html&&(e(this,"context",r,i),this.indexRefs&&void 0!==this.indexRefs[t]&&this.indexRefs[t]!==n&&(this.indexRefs[t]=n),this.items.forEach(function(e){e.reassign(t,n,r,i)}))}}(Ft),qt=function(e,t){return{init:e,reassign:t}}(Pt,It),Rt=function(e,t){function n(e){return s[e]||(s[e]=t(e))}var r,i,s={};try{t("table").innerHTML="foo"}catch(o){r=!0,i={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}return function(t,s,o,u){var a,f,l=[];if(t)for(r&&(f=i[s])?(a=n("DIV"),a.innerHTML=f[0]+t+f[1],a=a.querySelector(".x")):o===e.svg?(a=n("DIV"),a.innerHTML='<svg class="x">'+t+"</svg>",a=a.querySelector(".x")):(a=n(s),a.innerHTML=t);a.firstChild;)l.push(a.firstChild),u.appendChild(a.firstChild);return l}}(s,o),Ut=function(){var e,t=this.node;return t&&(e=t.parentNode)?(e.removeChild(t),t):void 0},zt=function(e,t){var n,r,i;return r=/</g,i=/>/g,n=function(t,n){this.type=e.TEXT,this.descriptor=t.descriptor,n&&(this.node=document.createTextNode(t.descriptor),n.appendChild(this.node))},n.prototype={detach:t,reassign:function(){},teardown:function(e){e&&this.detach()},firstNode:function(){return this.node},toString:function(){return(""+this.descriptor).replace(r,"&lt;").replace(i,"&gt;")}},n}(B,Ut),Wt=function(e,t){return function(n){n.keypath?t(n):e.removeUnresolved(n)}}(A,$),Xt=function(e){var t=function(t,n,r,i){this.root=t,this.ref=n,this.parentFragment=r,this.resolve=i,e.addUnresolved(this)};return t.prototype={teardown:function(){e.removeUnresolved(this)}},t}(A),Vt=function(e,t,n,r,i){function s(e,t,r){var i,s,o;if(!u.test(e.toString()))return n(e,"_nowrap",{value:!0}),e;if(!e["_"+t._guid]){n(e,"_"+t._guid,{value:function(){var n,r,i,o;if(n=t._captured,n||(t._captured=[]),r=e.apply(t,arguments),t._captured.length)for(i=s.length;i--;)o=s[i],o.updateSoftDependencies(t._captured);return t._captured=n,r},writable:!0});for(i in e)e.hasOwnProperty(i)&&(e["_"+t._guid][i]=e[i]);e["_"+t._guid+"_evaluators"]=[]}return s=e["_"+t._guid+"_evaluators"],o=s.indexOf(r),-1===o&&s.push(r),e["_"+t._guid]}var o,u;return u=/this/,o=function(t,n,i,o,u){var a;this.evaluator=i,this.keypath=n,this.root=t,this.argNum=o,this.type=e.REFERENCE,this.priority=u,a=t.get(n),"function"==typeof a&&(a=s(a,t,i)),this.value=i.values[o]=a,r(this)},o.prototype={update:function(){var e=this.root.get(this.keypath);"function"!=typeof e||e._nowrap||(e=s(e,this.root,this.evaluator)),t(e,this.value)||(this.evaluator.values[this.argNum]=e,this.evaluator.bubble(),this.value=e)},teardown:function(){i(this)}},o}(B,p,a,V,$),$t=function(e,t,n){var r=function(e,n,r){this.root=e,this.keypath=n,this.priority=r.priority,this.evaluator=r,t(this)};return r.prototype={update:function(){var t=this.root.get(this.keypath);e(t,this.value)||(this.evaluator.bubble(),this.value=t)},teardown:function(){n(this)}},r}(p,V,$),Jt=function(e,t,n,r,i,s,o,u){function a(e,t){var n,r;if(e=e.replace(/\$\{([0-9]+)\}/g,"_$1"),l[e])return l[e];for(r=[];t--;)r[t]="_"+t;return n=new Function(r.join(","),"return("+e+")"),l[e]=n,n}var f,l={};return f=function(e,t,n,r,i,s){var u=this;u.root=e,u.uniqueString=n,u.keypath=t,u.priority=s,u.fn=a(r,i.length),u.values=[],u.refs=[],i.forEach(function(t,n){t&&(t.indexRef?u.values[n]=t.value:u.refs.push(new o(e,t.keypath,u,n,s)))}),u.selfUpdating=u.refs.length<=1},f.prototype={bubble:function(){this.selfUpdating?this.update():this.deferred||(e.addEvaluator(this),this.deferred=!0)},update:function(){var e;if(this.evaluating)return this;this.evaluating=!0;try{e=this.fn.apply(null,this.values)}catch(o){this.root.debug&&t('Error evaluating "'+this.uniqueString+'": '+o.message||o),e=void 0}return n(e,this.value)||(this.value=e,r(this.root,this.keypath),s(this.root,this.keypath,e,!0),i(this.root,this.keypath)),this.evaluating=!1,this},teardown:function(){for(;this.refs.length;)this.refs.pop().teardown();r(this.root,this.keypath),this.root._evaluators[this.keypath]=null},refresh:function(){this.selfUpdating||(this.deferred=!0);for(var e=this.refs.length;e--;)this.refs[e].update();this.deferred&&(this.update(),this.deferred=!1)},updateSoftDependencies:function(e){var t,n,r;for(this.softRefs||(this.softRefs=[]),t=this.softRefs.length;t--;)r=this.softRefs[t],e[r.keypath]||(this.softRefs.splice(t,1),this.softRefs[r.keypath]=!1,r.teardown());for(t=e.length;t--;)n=e[t],this.softRefs[n]||(r=new u(this.root,n,this),this.softRefs.push(r),this.softRefs[n]=!0);this.selfUpdating=this.refs.length+this.softRefs.length<=1}},f}(A,Y,p,j,k,X,Vt,$t),Kt=function(e,t,n,r,i){function s(e,t){return e.replace(/\$\{([0-9]+)\}/g,function(e,n){return t[n]?t[n].value||t[n].keypath:"undefined"})}function o(e){return"${"+e.replace(/[\.\[\]]/g,"-")+"}"}var u=function(r,i,s,o){var u,a,f,l=this;return u=r.root,this.root=u,this.callback=o,this.owner=r,this.str=s.s,this.args=f=[],this.unresolved=[],this.pending=0,a=i.indexRefs,s.r&&s.r.length?(s.r.forEach(function(r,s){var o,c,h;return a&&void 0!==(o=a[r])?void (f[s]={indexRef:r,value:o}):(c=t(u,r,i))?void (f[s]={keypath:c}):(f[s]=void 0,l.pending+=1,h=new n(u,r,i,function(t){l.resolve(s,t),e(l.unresolved,h)}),void l.unresolved.push(h))}),this.ready=!0,void this.bubble()):(this.resolved=this.ready=!0,void this.bubble())};return u.prototype={bubble:function(){this.ready&&(this.uniqueString=s(this.str,this.args),this.keypath=o(this.uniqueString),this.createEvaluator(),this.callback(this.keypath))},teardown:function(){for(var e;e=this.unresolved.pop();)e.teardown()},resolve:function(e,t){this.args[e]={keypath:t},this.bubble(),this.resolved=!--this.pending},createEvaluator:function(){var e;this.root._evaluators[this.keypath]?this.root._evaluators[this.keypath].refresh():(e=new r(this.root,this.keypath,this.uniqueString,this.str,this.args,this.owner.priority),this.root._evaluators[this.keypath]=e,e.update())},reassign:function(e,t,n,r){var s;this.args.forEach(function(o){var u;o.keypath&&(u=i(o.keypath,n,r))?(o.keypath=u,s=!0):o.indexRef===e&&(o.value=t,s=!0)}),s&&this.bubble()}},u}(w,N,Xt,Jt,jt),Qt=function(e,t,n,r,i,s,o){var u=function(i,s,u){var f,l,c,h,p,d=this;return f=i.root,l=i.parentFragment,this.ref=s.r,this.root=i.root,this.mustache=i,this.callback=u,this.pending=0,this.unresolved=[],p=this.members=[],this.indexRefMembers=[],this.keypathObservers=[],this.expressionResolvers=[],s.m.forEach(function(s,u){var v,m,g,y,b,w;return"string"==typeof s?void (d.members[u]=s):s.t===e.REFERENCE?(v=s.n,m=l.indexRefs,m&&void 0!==(g=m[v])?(p[u]=g,void d.indexRefMembers.push({ref:v,index:u})):(h=!0,y=function(e){var t=new a(f,e,i.priority,d,u);d.keypathObservers.push(t)},(c=n(f,v,l))?void y(c):(p[u]=void 0,d.pending+=1,b=new r(f,v,l,function(e){d.resolve(u,e),t(d.unresolved,b)}),d.unresolved.push(b),null))):(h=!0,d.pending+=1,w=new o(d,l,s,function(e){d.resolve(u,e),t(d.unresolved,w)}),void d.unresolved.push(w))}),h?(this.ready=!0,void this.bubble()):(c=this.getKeypath(),void u(c))};u.prototype={getKeypath:function(){return this.ref+"."+this.members.join(".")},bubble:function(){this.ready&&!this.pending&&this.callback(this.getKeypath())},resolve:function(e,t){var n=new a(this.root,t,this.mustache.priority,this,e);n.update(),this.keypathObservers.push(n),this.resolved=!--this.pending,this.bubble()},teardown:function(){for(var e;e=this.unresolved.pop();)e.teardown()},reassign:function(e,t){var n,r,i;for(r=this.indexRefMembers.length;r--;)i=this.indexRefMembers[r],i.ref===e&&(n=!0,this.members[i.index]=t);n&&this.bubble()}};var a=function(e,t,n,r,s){this.root=e,this.keypath=t,this.priority=n,this.resolver=r,this.index=s,i(this),this.update()};return a.prototype={update:function(){var e=this.resolver;e.members[this.index]=this.root.get(this.keypath),e.bubble()},teardown:function(){s(this)}},u}(B,w,N,Xt,V,$,Kt),Gt=function(e,t,n,r){return function(i,s){var o,u,a,f,l,c,h;l=s.parentFragment,c=s.descriptor,i.root=l.root,i.parentFragment=l,i.descriptor=s.descriptor,i.index=s.index||0,i.priority=l.priority,i.type=s.descriptor.t,h=function(e){i.resolve(e)},(o=c.r)&&(a=l.indexRefs,a&&void 0!==(f=a[o])?(i.indexRef=o,i.value=f,i.render(i.value)):(u=t(i.root,o,i.parentFragment),void 0!==u?h(u):(i.ref=o,e.addUnresolved(i)))),s.descriptor.x&&(i.resolver=new r(i,l,s.descriptor.x,h)),s.descriptor.kx&&(i.resolver=new n(i,s.descriptor.kx,h)),i.descriptor.n&&!i.hasOwnProperty("value")&&i.render(void 0)}}(A,N,Qt,Kt),Yt=function(e,t){var n={evaluateWrapped:!0};return function(){var r=t(this.root,this.keypath,n);e(r,this.value)||(this.render(r),this.value=r)}}(p,G),Zt=function(e,t,n){return function(r){var i;if(r!==this.keypath){if(this.registered&&(n(this),this.type===e.SECTION))for(i=this.fragments.length;i--;)this.fragments[i].reassign(null,null,this.keypath,r);this.keypath=r,t(this),this.update()}}}(B,V,$),en=function(e){return function(t,n,r,i){var s,o;if(this.resolver?this.resolver.reassign(t,n,r,i):this.keypath?(s=e(this.keypath,r,i),s&&this.resolve(s)):void 0!==t&&this.indexRef===t&&(this.value=n,this.render(n)),this.fragments)for(o=this.fragments.length;o--;)this.fragments[o].reassign(t,n,r,i)}}(jt),tn=function(e,t,n,r){return{init:e,update:t,resolve:n,reassign:r}}(Gt,Yt,Zt,en),nn=function(e,t,n,r){var i,s,o;return s=/</g,o=/>/g,i=function(t,r){this.type=e.INTERPOLATOR,r&&(this.node=document.createTextNode(""),r.appendChild(this.node)),n.init(this,t)},i.prototype={update:n.update,resolve:n.resolve,reassign:n.reassign,detach:r,teardown:function(e){e&&this.detach(),t(this)},render:function(e){this.node&&(this.node.data=void 0==e?"":e)},firstNode:function(){return this.node},toString:function(){var e=void 0!=this.value?""+this.value:"";return e.replace(s,"&lt;").replace(o,"&gt;")}},i}(B,Wt,tn,Ut),rn=function(){var e=[];return function(t){var n,r,i,s,o,u,a,f,l=this;for(n=this.parentFragment,o=[],t.forEach(function(t,n){var i,s,u,a;return t===n?void (o[t]=l.fragments[n]):(void 0===r&&(r=n),-1===t?void e.push(l.fragments[n]):(i=l.fragments[n],s=t-n,u=l.keypath+"."+n,a=l.keypath+"."+t,i.reassign(l.descriptor.i,n,t,s,u,a),void (o[t]=i)))});a=e.pop();)a.teardown(!0);if(void 0===r&&(r=this.length),this.length=s=this.root.get(this.keypath).length,s!==r){for(u={descriptor:this.descriptor.f,root:this.root,pNode:n.pNode,owner:this},this.descriptor.i&&(u.indexRef=this.descriptor.i),i=r;s>i;i+=1)(a=o[i])?this.docFrag.appendChild(a.detach(!1)):(u.context=this.keypath+"."+i,u.index=i,a=this.createFragment(u)),this.fragments[i]=a;f=n.findNextNode(this),n.pNode.insertBefore(this.docFrag,f)}}}(),sn=function(e,t){function n(e,t,n){var r,i,s;if(i=t.length,i<e.length)for(s=e.fragments.splice(i,e.length-i);s.length;)s.pop().teardown(!0);else if(i>e.length)for(r=e.length;i>r;r+=1)n.context=e.keypath+"."+r,n.index=r,e.descriptor.i&&(n.indexRef=e.descriptor.i),e.fragments[r]=e.createFragment(n);e.length=i}function r(e,t,n){var r,i,s,o;for(s=e.hasKey||(e.hasKey={}),i=e.fragments.length;i--;)o=e.fragments[i],o.index in t||(e.fragments[i].teardown(!0),e.fragments.splice(i,1),s[o.index]=!1);for(r in t)s[r]||(n.context=e.keypath+"."+r,n.index=r,e.descriptor.i&&(n.indexRef=e.descriptor.i),e.fragments.push(e.createFragment(n)),s[r]=!0);e.length=e.fragments.length}function i(e,t){e.length||(t.context=e.keypath,t.index=0,e.fragments[0]=e.createFragment(t),e.length=1)}function s(t,n,r,i){var s,o,u,a;if(o=e(n)&&0===n.length,s=r?o||!n:n&&!o){if(t.length||(i.index=0,t.fragments[0]=t.createFragment(i),t.length=1),t.length>1)for(u=t.fragments.splice(1);a=u.pop();)a.teardown(!0)}else t.length&&(t.teardownFragments(!0),t.length=0)}return function(o,u){var a={descriptor:o.descriptor.f,root:o.root,pNode:o.parentFragment.pNode,pElement:o.parentFragment.pElement,owner:o};return o.descriptor.n?void s(o,u,!0,a):void (e(u)?n(o,u,a):t(u)||"function"==typeof u?o.descriptor.i?r(o,u,a):i(o,a):s(o,u,!1,a))}}(M,Z),on=function(e,t){return function(n){var r,i;(i=this.root._wrapped[this.keypath])&&(n=i.get()),this.rendering||(this.rendering=!0,t(this,n),this.rendering=!1,(!this.docFrag||this.docFrag.childNodes.length)&&!this.initialising&&e&&(r=this.parentFragment.findNextNode(this),r&&r.parentNode===this.parentFragment.pNode?this.parentFragment.pNode.insertBefore(this.docFrag,r):this.parentFragment.pNode.appendChild(this.docFrag)))}}(u,sn),un=function(e,t,n,r){var i,s,o,u,a;for(o=e.descriptor.i,i=t;n>i;i+=1)s=e.fragments[i],u=e.keypath+"."+(i-r),a=e.keypath+"."+i,s.index=i,s.reassign(o,i,u,a)},an=function(e){function t(e){e.teardown(!0)}function n(e,t,n){var r,i,s;for(e.rendering=!0,r={descriptor:e.descriptor.f,root:e.root,pNode:e.parentFragment.pNode,owner:e,indexRef:e.descriptor.i},i=t;n>i;i+=1)r.context=e.keypath+"."+i,r.index=i,e.fragments[i]=e.createFragment(r);s=e.fragments[n]?e.fragments[n].firstNode():e.parentFragment.findNextNode(e),e.parentFragment.pNode.insertBefore(e.docFrag,s),e.rendering=!1}return function(r){var i,s,o,u,a,f=this;if(i=r.balance){if(s=r.start,f.length+=i,0>i)return f.fragments.splice(s,-i).forEach(t),void e(f,s,f.length,i);o=s+r.removed,u=s+r.added,a=[o,0],a.length+=i,f.fragments.splice.apply(f.fragments,a),e(f,u,f.length,i),n(f,o,u)}}}(un),fn=function(e,t,n,r,i,s,o){var u,a;return o.push(function(){a=o.DomFragment}),u=function(n,r){this.type=e.SECTION,this.inverted=!!n.descriptor.n,this.fragments=[],this.length=0,r&&(this.docFrag=document.createDocumentFragment()),this.initialising=!0,t.init(this,n),r&&r.appendChild(this.docFrag),this.initialising=!1},u.prototype={update:t.update,resolve:t.resolve,reassign:t.reassign,splice:i,merge:n,detach:function(){var e,t;if(this.docFrag){for(t=this.fragments.length,e=0;t>e;e+=1)this.docFrag.appendChild(this.fragments[e].detach());return this.docFrag}},teardown:function(e){this.teardownFragments(e),s(this)},firstNode:function(){return this.fragments[0]?this.fragments[0].firstNode():this.parentFragment.findNextNode(this)},findNextNode:function(e){return this.fragments[e.index+1]?this.fragments[e.index+1].firstNode():this.parentFragment.findNextNode(this)},teardownFragments:function(e){for(var t;t=this.fragments.shift();)t.teardown(e)},render:r,createFragment:function(e){var t=new a(e);return this.docFrag&&this.docFrag.appendChild(t.docFrag),t},toString:function(){var e,t,n;for(e="",t=0,n=this.length,t=0;n>t;t+=1)e+=this.fragments[t].toString();return e},find:function(e){var t,n,r;for(n=this.fragments.length,t=0;n>t;t+=1)if(r=this.fragments[t].find(e))return r;return null},findAll:function(e,t){var n,r;for(r=this.fragments.length,n=0;r>n;n+=1)this.fragments[n].findAll(e,t)},findComponent:function(e){var t,n,r;for(n=this.fragments.length,t=0;n>t;t+=1)if(r=this.fragments[t].findComponent(e))return r;return null},findAllComponents:function(e,t){var n,r;for(r=this.fragments.length,n=0;r>n;n+=1)this.fragments[n].findAllComponents(e,t)}},u}(B,tn,rn,on,an,Wt,b),ln=function(e,t,n,r,i){var s=function(t,r){this.type=e.TRIPLE,r&&(this.nodes=[],this.docFrag=document.createDocumentFragment()),this.initialising=!0,n.init(this,t),r&&r.appendChild(this.docFrag),this.initialising=!1};return s.prototype={update:n.update,resolve:n.resolve,reassign:n.reassign,detach:function(){var e,t;if(this.docFrag){for(e=this.nodes.length,t=0;e>t;t+=1)this.docFrag.appendChild(this.nodes[t]);return this.docFrag}},teardown:function(e){e&&(this.detach(),this.docFrag=this.nodes=null),i(this)},firstNode:function(){return this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)},render:function(e){var t,n;if(this.nodes){for(;this.nodes.length;)t=this.nodes.pop(),t.parentNode.removeChild(t);if(!e)return void (this.nodes=[]);n=this.parentFragment.pNode,this.nodes=r(e,n.tagName,n.namespaceURI,this.docFrag),this.initialising||n.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),"SELECT"===n.tagName&&n._ractive&&n._ractive.binding&&n._ractive.binding.update()}},toString:function(){return void 0!=this.value?this.value:""},find:function(e){var n,r,i,s;for(r=this.nodes.length,n=0;r>n;n+=1)if(i=this.nodes[n],1===i.nodeType){if(t(i,e))return i;if(s=i.querySelector(e))return s}return null},findAll:function(e,n){var r,i,s,o,u,a;for(i=this.nodes.length,r=0;i>r;r+=1)if(s=this.nodes[r],1===s.nodeType&&(t(s,e)&&n.push(s),o=s.querySelectorAll(e)))for(u=o.length,a=0;u>a;a+=1)n.push(o[a])}},s}(B,ot,tn,Rt,Wt),cn=function(e){return function(t,n){return t.a&&t.a.xmlns?t.a.xmlns:"svg"===t.e?e.svg:n.namespaceURI||e.html}}(s),hn=function(){var e,t,n,r;return e="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),t="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),n=function(e){for(var t={},n=e.length;n--;)t[e[n].toLowerCase()]=e[n];return t},r=n(e.concat(t)),function(e){var t=e.toLowerCase();return r[t]||t}}(),pn=function(e,t){return function(n,r){var i,s;if(i=r.indexOf(":"),-1===i||(s=r.substr(0,i),"xmlns"===s))n.name=n.element.namespace!==e.html?t(r):r,n.lcName=n.name.toLowerCase();else if(r=r.substring(i+1),n.name=t(r),n.lcName=n.name.toLowerCase(),n.namespace=e[s.toLowerCase()],!n.namespace)throw'Unknown namespace ("'+s+'")'}}(s,hn),dn=function(e){return function(t,n){var r,i=null===n.value?"":n.value;(r=n.pNode)&&(t.namespace?r.setAttributeNS(t.namespace,n.name,i):"style"===n.name&&r.style.setAttribute?r.style.setAttribute("cssText",i):"class"!==n.name||r.namespaceURI&&r.namespaceURI!==e.html?r.setAttribute(n.name,i):r.className=i,"id"===t.name&&(n.root.nodes[n.value]=r),"value"===t.name&&(r._ractive.value=n.value)),t.value=n.value}}(s),vn=function(e){var t={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"};return function(n,r){var i;!n.pNode||n.namespace||r.pNode.namespaceURI&&r.pNode.namespaceURI!==e.html||(i=t[n.name]||n.name,void 0!==r.pNode[i]&&(n.propertyName=i),("boolean"==typeof r.pNode[i]||"value"===i)&&(n.useProperty=!0))}}(s),mn=function(e){return function(t){var n,r;return n=t.fragment.items,1===n.length&&(r=n[0],r.type===e.INTERPOLATOR&&(r.keypath||r.ref))?r:void 0}}(B),gn=function(e){return function(t,n){var r;if(!e(t)||!e(n))return!1;if(t.length!==n.length)return!1;for(r=t.length;r--;)if(t[r]!==n[r])return!1;return!0}}(M),yn=function(e,t,n,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g,y,b,w='For two-way binding to work, attribute value must be a single interpolator (e.g. value="{{foo}}")',E="You cannot set up two-way binding against an expression ";return o=function(){var e,n,r,i=this.pNode;return(e=this.interpolator)?e.keypath&&"${"===e.keypath.substr?(t(E+e.keypath),!1):(e.keypath||e.resolve(e.descriptor.r),this.keypath=e.keypath,(n=l(this))?(i._ractive.binding=this.element.binding=n,this.twoway=!0,r=this.root._twowayBindings[this.keypath]||(this.root._twowayBindings[this.keypath]=[]),r.push(n),!0):!1):(t(w),!1)},u=function(){e.start(this._ractive.root),this._ractive.binding.update(),e.end()},a={evaluateWrapped:!0},f=function(){var e=i(this._ractive.root,this._ractive.binding.keypath,a);this.value=void 0==e?"":e},l=function(e){var t=e.pNode;if("SELECT"===t.tagName)return t.multiple?new h(e,t):new p(e,t);if("checkbox"===t.type||"radio"===t.type){if("name"===e.propertyName){if("checkbox"===t.type)return new v(e,t);if("radio"===t.type)return new d(e,t)}return"checked"===e.propertyName?new m(e,t):null}if("value"!==e.lcName)throw new Error("Attempted to set up an illegal two-way binding. This error is unexpected - if you can, please file an issue at https://github.com/RactiveJS/Ractive, or contact @RactiveJS on Twitter. Thanks!");return"file"===t.type?new g(e,t):t.getAttribute("contenteditable")?new y(e,t):new b(e,t)},h=function(e,t){var n;c(this,e,t),t.addEventListener("change",u,!1),n=i(this.root,this.keypath),void 0===n&&this.update()},h.prototype={value:function(){var e,t,n,r,i,s;for(e=[],t=this.node.options,r=t.length,n=0;r>n;n+=1)i=t[n],i.selected&&(s=i._ractive?i._ractive.value:i.value,e.push(s));return e},update:function(){var t,r,i;return t=this.attr,r=t.value,i=this.value(),void 0!==r&&n(i,r)||(e.addBinding(t),t.value=i,s(this.root,this.keypath,i),e.trigger()),this},deferUpdate:function(){this.deferred!==!0&&(e.addAttribute(this),this.deferred=!0)},teardown:function(){this.node.removeEventListener("change",u,!1)}},p=function(e,t){var n;c(this,e,t),t.addEventListener("change",u,!1),n=i(this.root,this.keypath),void 0===n&&this.update()},p.prototype={value:function(){var e,t,n,r,i;for(e=this.node.options,n=e.length,t=0;n>t;t+=1)if(r=e[t],e[t].selected)return i=r._ractive?r._ractive.value:r.value},update:function(){var t=this.value();return e.addBinding(this.attr),this.attr.value=t,s(this.root,this.keypath,t),e.trigger(),this},deferUpdate:function(){this.deferred!==!0&&(e.addAttribute(this),this.deferred=!0)},teardown:function(){this.node.removeEventListener("change",u,!1)}},d=function(t,n){var r;this.radioName=!0,c(this,t,n),n.name="{{"+t.keypath+"}}",n.addEventListener("change",u,!1),n.attachEvent&&n.addEventListener("click",u,!1),r=i(this.root,this.keypath),void 0!==r?n.checked=r==n._ractive.value:e.addRadio(this)},d.prototype={value:function(){return this.node._ractive?this.node._ractive.value:this.node.value},update:function(){var t=this.node;t.checked&&(e.addBinding(this.attr),s(this.root,this.keypath,this.value()),e.trigger())},teardown:function(){this.node.removeEventListener("change",u,!1),this.node.removeEventListener("click",u,!1)}},v=function(t,n){var r,s;this.checkboxName=!0,c(this,t,n),n.name="{{"+this.keypath+"}}",n.addEventListener("change",u,!1),n.attachEvent&&n.addEventListener("click",u,!1),r=i(this.root,this.keypath),void 0!==r?(s=-1!==r.indexOf(n._ractive.value),n.checked=s):e.addCheckbox(this)},v.prototype={changed:function(){return this.node.checked!==!!this.checked},update:function(){this.checked=this.node.checked,e.addBinding(this.attr),s(this.root,this.keypath,r(this.root,this.keypath)),e.trigger()},teardown:function(){this.node.removeEventListener("change",u,!1),this.node.removeEventListener("click",u,!1)}},m=function(e,t){c(this,e,t),t.addEventListener("change",u,!1),t.attachEvent&&t.addEventListener("click",u,!1)},m.prototype={value:function(){return this.node.checked},update:function(){e.addBinding(this.attr),s(this.root,this.keypath,this.value()),e.trigger()},teardown:function(){this.node.removeEventListener("change",u,!1),this.node.removeEventListener("click",u,!1)}},g=function(e,t){c(this,e,t),t.addEventListener("change",u,!1)},g.prototype={value:function(){return this.attr.pNode.files},update:function(){s(this.attr.root,this.attr.keypath,this.value()),e.trigger()},teardown:function(){this.node.removeEventListener("change",u,!1)}},y=function(e,t){c(this,e,t),t.addEventListener("change",u,!1),this.root.lazy||(t.addEventListener("input",u,!1),t.attachEvent&&t.addEventListener("keyup",u,!1))},y.prototype={update:function(){e.addBinding(this.attr),s(this.root,this.keypath,this.node.innerHTML),e.trigger()},teardown:function(){this.node.removeEventListener("change",u,!1),this.node.removeEventListener("input",u,!1),this.node.removeEventListener("keyup",u,!1)}},b=function(e,t){c(this,e,t),t.addEventListener("change",u,!1),this.root.lazy||(t.addEventListener("input",u,!1),t.attachEvent&&t.addEventListener("keyup",u,!1)),this.node.addEventListener("blur",f,!1)},b.prototype={value:function(){var e=this.attr.pNode.value;return+e+""===e&&-1===e.indexOf("e")&&(e=+e),e},update:function(){var t=this.attr,n=this.value();e.addBinding(t),s(t.root,t.keypath,n),e.trigger()},teardown:function(){this.node.removeEventListener("change",u,!1),this.node.removeEventListener("input",u,!1),this.node.removeEventListener("keyup",u,!1),this.node.removeEventListener("blur",f,!1)}},c=function(e,t,n){e.attr=t,e.node=n,e.root=t.root,e.keypath=t.keypath},o}(A,Y,gn,S,G,I),bn=function(e,t,n){var r,i,s,o,u,a,f,l,c,h,p,d;return r=function(){var e;if(!this.ready)return this;if(e=this.pNode,"SELECT"===e.tagName&&"value"===this.lcName)return this.update=s,this.deferredUpdate=o,this.update();if(this.isFileInputValue)return this.update=i,this;if(this.twoway&&"name"===this.lcName){if("radio"===e.type)return this.update=f,this.update();if("checkbox"===e.type)return this.update=l,this.update()}return"style"===this.lcName&&e.style.setAttribute?(this.update=c,this.update()):"class"!==this.lcName||e.namespaceURI&&e.namespaceURI!==t.html?e.getAttribute("contenteditable")&&"value"===this.lcName?(this.update=p,this.update()):(this.update=d,this.update()):(this.update=h,this.update())},i=function(){return this},o=function(){this.deferredUpdate=this.pNode.multiple?a:u,this.deferredUpdate()},s=function(){return e.addSelectValue(this),this},u=function(){var e,t,n,r,i=this.fragment.getValue();for(this.value=this.pNode._ractive.value=i,e=this.pNode.options,r=e.length;r--;)if(t=e[r],n=t._ractive?t._ractive.value:t.value,n==i)return t.selected=!0,this;return this},a=function(){var e,t,r,i,s=this.fragment.getValue();for(n(s)||(s=[s]),e=this.pNode.options,t=e.length;t--;)r=e[t],i=r._ractive?r._ractive.value:r.value,r.selected=-1!==s.indexOf(i);return this.value=s,this},f=function(){var e,t;return e=this.pNode,t=this.fragment.getValue(),e.checked=t==e._ractive.value,this},l=function(){var e,t;return e=this.pNode,t=this.fragment.getValue(),n(t)?(e.checked=-1!==t.indexOf(e._ractive.value),this):(e.checked=t==e._ractive.value,this)},c=function(){var e,t;return e=this.pNode,t=this.fragment.getValue(),void 0===t&&(t=""),t!==this.value&&(e.style.setAttribute("cssText",t),this.value=t),this},h=function(){var e,t;return e=this.pNode,t=this.fragment.getValue(),void 0===t&&(t=""),t!==this.value&&(e.className=t,this.value=t),this},p=function(){var e,t;return e=this.pNode,t=this.fragment.getValue(),void 0===t&&(t=""),t!==this.value&&(this.active||(e.innerHTML=t),this.value=t),this},d=function(){var e,t,n;if(e=this.pNode,t=this.fragment.getValue(),this.isValueAttribute&&(e._ractive.value=t),void 0==t&&(t=""),t!==this.value){if(this.useProperty)return this.active||(e[this.propertyName]=t),"OPTION"===e.tagName&&e.selected&&(n=this.element.select.binding)&&n.update(),this.value=t,this;if(this.namespace)return e.setAttributeNS(this.namespace,this.name,t),this.value=t,this;"id"===this.lcName&&(void 0!==this.value&&(this.root.nodes[this.value]=void 0),this.root.nodes[t]=e),e.setAttribute(this.name,t),this.value=t}return this},r}(A,s,M),wn=function(e){var t;return t=this.str.substr(this.pos,e.length),t===e?(this.pos+=e.length,e):null},En=function(){var e=/^\s+/;return function(){var t=e.exec(this.remaining());return t?(this.pos+=t[0].length,t[0]):null}}(),Sn=function(e){return function(t){var n=e.exec(t.str.substring(t.pos));return n?(t.pos+=n[0].length,n[1]||n[0]):null}},xn=function(e){var t,n,r;return t=e(/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/),n=e(/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/),r=e(/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/),function(e){return function(i){var s,o,u,a;for(s=i.pos,o='"',u=!1;!u;)a=t(i)||n(i)||i.getStringMatch(e),a?o+='"'===a?'\\"':"\\'"===a?"'":a:(a=r(i),a?o+="\\u"+("000"+a.charCodeAt(1).toString(16)).slice(-4):u=!0);return o+='"',JSON.parse(o)}}}(Sn),Tn=function(e){return e('"')}(xn),Nn=function(e){return e("'")}(xn),Cn=function(e,t,n){return function(r){var i,s;return i=r.pos,r.getStringMatch('"')?(s=n(r),r.getStringMatch('"')?{t:e.STRING_LITERAL,v:s}:(r.pos=i,null)):r.getStringMatch("'")?(s=t(r),r.getStringMatch("'")?{t:e.STRING_LITERAL,v:s}:(r.pos=i,null)):null}}(B,Tn,Nn),kn=function(e,t){var n=t(/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/);return function(t){var r;return(r=n(t))?{t:e.NUMBER_LITERAL,v:r}:null}}(B,Sn),Ln=function(e){return e(/^[a-zA-Z_$][a-zA-Z_$0-9]*/)}(Sn),An=function(e,t,n){var r=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;return function(i){var s;return(s=e(i))?r.test(s.v)?s.v:'"'+s.v.replace(/"/g,'\\"')+'"':(s=t(i))?s.v:(s=n(i))?s:void 0}}(Cn,kn,Ln),On=function(e,t,n,r){function i(e){var t,n,i;return e.allowWhitespace(),(t=r(e))?(i={key:t},e.allowWhitespace(),e.getStringMatch(":")?(e.allowWhitespace(),(n=e.getToken())?(i.value=n.v,i):null):null):null}var s,o,u,a,f,l;return o={"true":!0,"false":!1,"undefined":void 0,"null":null},u=new RegExp("^(?:"+Object.keys(o).join("|")+")"),a=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,f=/\$\{([^\}]+)\}/g,l=/^\$\{([^\}]+)\}/,s=function(e,t){this.str=e,this.values=t,this.pos=0,this.result=this.getToken()},s.prototype={remaining:function(){return this.str.substring(this.pos)},getStringMatch:e,getToken:function(){return this.allowWhitespace(),this.getPlaceholder()||this.getSpecial()||this.getNumber()||this.getString()||this.getObject()||this.getArray()},getPlaceholder:function(){var e;return this.values?(e=l.exec(this.remaining()))&&this.values.hasOwnProperty(e[1])?(this.pos+=e[0].length,{v:this.values[e[1]]}):void 0:null},getSpecial:function(){var e;return(e=u.exec(this.remaining()))?(this.pos+=e[0].length,{v:o[e[0]]}):void 0},getNumber:function(){var e;return(e=a.exec(this.remaining()))?(this.pos+=e[0].length,{v:+e[0]}):void 0},getString:function(){var e,t=n(this);return t&&(e=this.values)?{v:t.v.replace(f,function(t,n){return e[n]||n})}:t},getObject:function(){var e,t;if(!this.getStringMatch("{"))return null;for(e={};t=i(this);){if(e[t.key]=t.value,this.allowWhitespace(),this.getStringMatch("}"))return{v:e};if(!this.getStringMatch(","))return null}return null},getArray:function(){var e,t;if(!this.getStringMatch("["))return null;for(e=[];t=this.getToken();){if(e.push(t.v),this.getStringMatch("]"))return{v:e};if(!this.getStringMatch(","))return null}return null},allowWhitespace:t},function(e,t){var n=new s(e,t);return n.result?{value:n.result.v,remaining:n.remaining()}:null}}(wn,En,Cn,An),Mn=function(e,t,n){function r(e){return"string"==typeof e?e:JSON.stringify(e)}var i=function(t){this.type=e.INTERPOLATOR,n.init(this,t)};return i.prototype={update:n.update,resolve:n.resolve,reassign:n.reassign,render:function(e){this.value=e,this.parentFragment.bubble()},teardown:function(){t(this)},toString:function(){return void 0==this.value?"":r(this.value)}},i}(B,Wt,tn),_n=function(e,t,n,r,i){var s,o;return i.push(function(){o=i.StringFragment}),s=function(n){this.type=e.SECTION,this.fragments=[],this.length=0,t.init(this,n)},s.prototype={update:t.update,resolve:t.resolve,reassign:t.reassign,teardown:function(){this.teardownFragments(),r(this)},teardownFragments:function(){for(;this.fragments.length;)this.fragments.shift().teardown();this.length=0},bubble:function(){this.value=this.fragments.join(""),this.parentFragment.bubble()},render:function(e){var t;(t=this.root._wrapped[this.keypath])&&(e=t.get()),n(this,e),this.parentFragment.bubble()},createFragment:function(e){return new o(e)},toString:function(){return this.fragments.join("")}},s}(B,tn,sn,Wt,b),Dn=function(e){var t=function(t){this.type=e.TEXT,this.text=t};return t.prototype={toString:function(){return this.text},reassign:function(){},teardown:function(){}},t}(B),Pn=function(e,t){return function(){var n,r,i,s,o,u,a;if(!this.argsList||this.dirty){if(n={},r=0,s=this.root._guid,a=function(e){return e.map(function(e){var t,i,o;return e.text?e.text:e.fragments?e.fragments.map(function(e){return a(e.items)}).join(""):(t=s+"-"+r++,o=(i=e.root._wrapped[e.keypath])?i.value:e.value,n[t]=o,"${"+t+"}")}).join("")},i=a(this.items),u=t("["+i+"]",n))this.argsList=u.value;else{if(o="Could not parse directive arguments ("+this.toString()+"). If you think this is a bug, please file an issue at http://github.com/RactiveJS/Ractive/issues",this.root.debug)throw new Error(o);e(o),this.argsList=[i]}this.dirty=!1}return this.argsList}}(Y,On),Hn=function(e,t,n,r,i,s,o,u){var a=function(e){n.init(this,e)};return a.prototype={reassign:n.reassign,createItem:function(t){if("string"==typeof t.descriptor)return new s(t.descriptor);switch(t.descriptor.t){case e.INTERPOLATOR:return new r(t);case e.TRIPLE:return new r(t);case e.SECTION:return new i(t);default:throw"Something went wrong in a rather interesting way"}},bubble:function(){this.dirty=!0,this.owner.bubble()},teardown:function(){var e,t;for(e=this.items.length,t=0;e>t;t+=1)this.items[t].teardown()},getValue:function(){var t;return 1===this.items.length&&this.items[0].type===e.INTERPOLATOR&&(t=this.items[0].value,void 0!==t)?t:this.toString()},isSimple:function(){var t,n,r;if(void 0!==this.simple)return this.simple;for(t=this.items.length;t--;)if(n=this.items[t],n.type!==e.TEXT){if(n.type!==e.INTERPOLATOR)return this.simple=!1;if(r)return!1;r=!0}return this.simple=!0},toString:function(){return this.items.join("")},toJSON:function(){var e,n=this.getValue();return"string"==typeof n&&(e=t(n),n=e?e.value:n),n},toArgsList:o},u.StringFragment=a,a}(B,On,qt,Mn,_n,Dn,Pn,b),Bn=function(e,t,n,r,i,s,o,u,a){var f=function(e){return this.type=t.ATTRIBUTE,this.element=e.element,n(this,e.name),null===e.value||"string"==typeof e.value?void r(this,e):(this.root=e.root,this.pNode=e.pNode,this.parentFragment=this.element.parentFragment,this.fragment=new a({descriptor:e.value,root:this.root,owner:this}),this.interpolator=s(this),void (this.pNode&&("value"===this.name&&(this.isValueAttribute=!0,"INPUT"===this.pNode.tagName&&"file"===this.pNode.type&&(this.isFileInputValue=!0)),i(this,e),this.selfUpdating=this.fragment.isSimple(),this.ready=!0)))};return f.prototype={bind:o,update:u,updateBindings:function(){this.keypath=this.interpolator.keypath||this.interpolator.ref,"name"===this.propertyName&&(this.pNode.name="{{"+this.keypath+"}}")},reassign:function(e,t,n,r){this.fragment&&(this.fragment.reassign(e,t,n,r),this.twoway&&this.updateBindings())},teardown:function(){var e;if(this.boundEvents)for(e=this.boundEvents.length;e--;)this.pNode.removeEventListener(this.boundEvents[e],this.updateModel,!1);this.fragment&&this.fragment.teardown()},bubble:function(){this.selfUpdating?this.update():!this.deferred&&this.ready&&(e.addAttribute(this),this.deferred=!0)},toString:function(){var e,t;if(null===this.value)return this.name;if("value"!==this.name||"select"!==this.element.lcName)return"name"===this.name&&"input"===this.element.lcName&&(t=this.interpolator)?"name={{"+(t.keypath||t.ref)+"}}":this.fragment?(e=this.fragment.toString(),this.name+"="+JSON.stringify(e)):this.name+"="+JSON.stringify(this.value)}},f}(A,B,pn,dn,vn,mn,yn,bn,Hn),jn=function(e){return function(t,n,r){var i=new e({element:t,name:n,value:r,root:t.root,pNode:t.node});t.attributes.push(t.attributes[n]=i),"name"!==n&&i.update()}}(Bn),Fn=function(e){return function(t,n){var r;t.attributes=[];for(r in n)n.hasOwnProperty(r)&&e(t,r,n[r]);return t.attributes}}(jn),In=function(e){for(var t=[],n=e.length;n--;)t[n]=e[n];return t},qn=function(e){return function(t,n){return t.matchingStaticNodes[n]||(t.matchingStaticNodes[n]=e(t.node.querySelectorAll(n))),t.matchingStaticNodes[n]}}(In),Rn=function(e,t,n,r,i){function s(e){var t,n,i,s,o,u,a;i=e.node,t=e.root;do for(n=t._liveQueries,a=n.length;a--;)s=n[a],o=n[s],u=r(e,s),o.push.apply(o,u);while(t=t._parent)}var o,u,a;return i.push(function(){o=i.DomFragment}),u=function(){var e=this.node,t=this.fragment.toString();e.styleSheet?e.styleSheet.cssText=t:e.innerHTML=t},a=function(){this.node.type&&"text/javascript"!==this.node.type||e("Script tag was updated. This does not cause the code to be re-evaluated!"),this.node.text=this.fragment.toString()},function(e,r,i,f){return"script"===e.lcName||"style"===e.lcName?(e.fragment=new n({descriptor:i.f,root:e.root,owner:e}),void (f&&("script"===e.lcName?(e.bubble=a,e.node.text=e.fragment.toString()):(e.bubble=u,e.bubble())))):void ("string"!=typeof i.f||r&&r.namespaceURI&&r.namespaceURI!==t.html?(e.fragment=new o({descriptor:i.f,root:e.root,pNode:r,owner:e,pElement:e}),f&&r.appendChild(e.fragment.docFrag)):(e.html=i.f,f&&(r.innerHTML=e.html,e.matchingStaticNodes={},s(e))))}}(Y,s,Hn,qn,b),Un=function(e,t){var n=function(n,r,i){var s,o,u,a=this;if(a.root=r,a.node=i.node,s=n.n||n,"string"!=typeof s&&(o=new t({descriptor:s,root:r,owner:i}),s=o.toString(),o.teardown()),n.a?a.params=n.a:n.d&&(a.fragment=new t({descriptor:n.d,root:r,owner:i}),a.params=a.fragment.toArgsList(),a.fragment.bubble=function(){this.dirty=!0,a.params=this.toArgsList(),a.ready&&a.update()}),a.fn=r.decorators[s],!a.fn){if(u='Missing "'+s+'" decorator. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#decorators',r.debug)throw new Error(u);e(u)}};return n.prototype={init:function(){var e,t;if(this.params?(t=[this.node].concat(this.params),e=this.fn.apply(this.root,t)):e=this.fn.call(this.root,this.node),!e||!e.teardown)throw new Error("Decorator definition must return an object with a teardown method");this.actual=e,this.ready=!0},update:function(){this.actual.update?this.actual.update.apply(this.root,this.params):(this.actual.teardown(!0),this.init())},teardown:function(e){this.actual.teardown(),!e&&this.fragment&&this.fragment.teardown()}},n}(Y,Hn),zn=function(e,t){return function(n,r,i){var s=new t(n,r,i);s.fn&&(i.decorator=s,e.addDecorator(i.decorator))}}(A,Un),Wn=function(e,t){var n,r,i,s,o,u,a,f,l;return n=function(e,t,n,i){var s,o;s=e.node._ractive.events,o=s[t]||(s[t]=new r(e,t,i)),o.add(n)},r=function(t,n){var r;this.element=t,this.root=t.root,this.node=t.node,this.name=n,this.proxies=[],(r=this.root.events[n])?this.custom=r(this.node,l(n)):("on"+n in this.node||e('Missing "'+this.name+'" event. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#events'),this.node.addEventListener(n,f,!1))},r.prototype={add:function(e){this.proxies.push(new i(this.element,this.root,e))},teardown:function(){var e;for(this.custom?this.custom.teardown():this.node.removeEventListener(this.name,f,!1),e=this.proxies.length;e--;)this.proxies[e].teardown()},fire:function(e){for(var t=this.proxies.length;t--;)this.proxies[t].fire(e)}},i=function(e,n,r){var i;return this.root=n,i=r.n||r,this.n="string"==typeof i?i:new t({descriptor:r.n,root:this.root,owner:e}),r.a?(this.a=r.a,void (this.fire=o)):r.d?(this.d=new t({descriptor:r.d,root:this.root,owner:e}),void (this.fire=u)):void (this.fire=s)},i.prototype={teardown:function(){this.n.teardown&&this.n.teardown(),this.d&&this.d.teardown()},bubble:function(){}},s=function(e){this.root.fire(this.n.toString(),e)},o=function(e){this.root.fire.apply(this.root,[this.n.toString(),e].concat(this.a))},u=function(e){var t=this.d.toArgsList();"string"==typeof t&&(t=t.substr(1,t.length-2)),this.root.fire.apply(this.root,[this.n.toString(),e].concat(t))},f=function(e){var t=this._ractive;t.events[e.type].fire({node:this,original:e,index:t.index,keypath:t.keypath,context:t.root.get(t.keypath)})},a={},l=function(e){return a[e]?a[e]:a[e]=function(t){var n=t.node._ractive;t.index=n.index,t.keypath=n.keypath,t.context=n.root.get(n.keypath),n.events[e].fire(t)}},n}(Y,Hn),Xn=function(e){return function(t,n){var r,i,s;for(i in n)if(n.hasOwnProperty(i))for(s=i.split("-"),r=s.length;r--;)e(t,s[r],n[i])}}(Wn),Vn=function(e){var t,n,r,i,s;t=e.root;do for(n=t._liveQueries,r=n.length;r--;)i=n[r],s=n[i],s._test(e)&&(e.liveQueries||(e.liveQueries=[])).push(s);while(t=t._parent)},$n=function(){if(this._inited)throw new Error("Cannot initialize a transition more than once");this._inited=!0,this._fn.apply(this.root,[this].concat(this.params))},Jn=function(e,t,n){var r,i;if(e)return r={},i=n("div").style,function(e){var n,s,o;if(!r[e])if(void 0!==i[e])r[e]=e;else for(o=e.charAt(0).toUpperCase()+e.substring(1),n=t.length;n--;)if(s=t[n],void 0!==i[s+o]){r[e]=s+o;break}return r[e]}}(u,m,o),Kn=function(e,t,n,r){var i;if(t)return i=window.getComputedStyle||e.getComputedStyle,function(e){var t,i,s,o,u;if(t=window.getComputedStyle(this.node),"string"==typeof e)return u=t[r(e)],"0px"===u&&(u=0),u;if(!n(e))throw new Error("Transition#getStyle must be passed a string, or an array of strings representing CSS properties");for(i={},s=e.length;s--;)o=e[s],u=t[r(o)],"0px"===u&&(u=0),i[o]=u;return i}}(n,u,M,Jn),Qn=function(e){return function(t,n){var r;if("string"==typeof t)this.node.style[e(t)]=n;else for(r in t)t.hasOwnProperty(r)&&(this.node.style[e(r)]=t[r]);return this}}(Jn),Gn=function(e){return e.replace(/-([a-zA-Z])/g,function(e,t){return t.toUpperCase()})},Yn=function(e,t,n){function r(e){return e}var i=function(i){var s;this.duration=i.duration,this.step=i.step,this.complete=i.complete,"string"==typeof i.easing?(s=i.root.easing[i.easing],s||(e('Missing easing function ("'+i.easing+'"). You may need to download a plugin from [TODO]'),s=r)):s="function"==typeof i.easing?i.easing:r,this.easing=s,this.start=t(),this.end=this.start+this.duration,this.running=!0,n.add(this)};return i.prototype={tick:function(e){var t,n;return this.running?e>this.end?(this.step&&this.step(1),this.complete&&this.complete(1),!1):(t=e-this.start,n=this.easing(t/this.duration),this.step&&this.step(n),!0):!1},stop:function(){this.abort&&this.abort(),this.running=!1}},i}(Y,y,O),Zn=function(e){var t=new RegExp("^-(?:"+e.join("|")+")-");return function(e){return e.replace(t,"")}}(m),er=function(e){var t=new RegExp("^(?:"+e.join("|")+")([A-Z])");return function(e){var n;return e?(t.test(e)&&(e="-"+e),n=e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})):""}}(m),tr=function(e,t,n,r,i,s,o,u,a){var f,l,c,h,p,d,v,m={},g={};if(e)return f=n("div").style,function(){void 0!==f.transition?(l="transition",c="transitionend",h=!0):void 0!==f.webkitTransition?(l="webkitTransition",c="webkitTransitionEnd",h=!0):h=!1}(),l&&(p=l+"Duration",d=l+"Property",v=l+"TimingFunction"),function(e,n,f,l,h,y){setTimeout(function(){var b,w,E,S;S=function(){w&&E&&y()},b=e.node.namespaceURI+e.node.tagName,e.node.style[d]=l.map(o).map(a).join(","),e.node.style[v]=a(f.easing||"linear"),e.node.style[p]=f.duration/1e3+"s",h=function(t){var n;n=l.indexOf(r(u(t.propertyName))),-1!==n&&l.splice(n,1),l.length||(e.root.fire(e.name+":end"),e.node.removeEventListener(c,h,!1),E=!0,S())},e.node.addEventListener(c,h,!1),setTimeout(function(){for(var u,a,p,d,v=l.length,y=[];v--;)d=l[v],u=b+d,m[u]?e.node.style[o(d)]=n[d]:a=e.getStyle(d),void 0===m[u]&&(e.node.style[o(d)]=n[d],m[u]=e.getStyle(d)!=n[d],g[u]=!m[u]),g[u]&&(p=l.indexOf(d),-1===p?t("Something very strange happened with transitions. If you see this message, please let @RactiveJS know. Thanks!"):l.splice(p,1),e.node.style[o(d)]=a,y.push({name:o(d),interpolator:i(a,n[d])}));y.length?new s({root:e.root,duration:f.duration,easing:r(f.easing),step:function(t){var n,r;for(r=y.length;r--;)n=y[r],e.node.style[n.name]=n.interpolator(t)},complete:function(){w=!0,S()}}):w=!0,l.length||(e.node.removeEventListener(c,h,!1),E=!0,S())},0)},f.delay||0)}}(u,Y,o,Gn,tt,Yn,Jn,Zn,er),nr=function(e,t,n,r,i,s){var o;if(t)return o=window.getComputedStyle||e.getComputedStyle,function(e,t,o,u){var a,f=this;"string"==typeof e?(a={},a[e]=t):(a=e,u=o,o=t),o||(n('The "'+f.name+'" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340'),o=f,u=f.complete);var l=new r(function(e){var t,n,r,u,l,c,h,p;if(!o.duration)return f.setStyle(a),void e();for(t=Object.keys(a),n=[],r=window.getComputedStyle(f.node),l={},h=t.length;h--;)p=t[h],u=r[i(p)],"0px"===u&&(u=0),u!=a[p]&&(n.push(p),f.node.style[i(p)]=u);return n.length?void s(f,a,o,n,c,e):void e()});return u&&(n("t.animateStyle returns a Promise as of 0.4.0. Transition authors should do t.animateStyle(...).then(callback)"),l.then(u)),l}}(n,u,Y,d,Jn,tr),rr=function(e,t){var n;for(n in t)!t.hasOwnProperty(n)||n in e||(e[n]=t[n]);return e},ir=function(e){return function(t,n){return"number"==typeof t?t={duration:t}:"string"==typeof t?t="slow"===t?{duration:600}:"fast"===t?{duration:200}:{duration:400}:t||(t={}),e(t,n)}}(rr),sr=function(){this.originalStyle?this.node.setAttribute("style",this.originalStyle):(this.node.getAttribute("style"),this.node.removeAttribute("style"))},or=function(e,t,n,r,i,s,o,u){var a;return a=function(n,r,i,s){var o,u,a,f=this;if(this.root=r,this.node=i.node,this.isIntro=s,this.originalStyle=this.node.getAttribute("style"),f.complete=function(e){!e&&f.isIntro&&f.resetStyle(),f.node._ractive.transition=null,f._manager.remove(f)},o=n.n||n,"string"!=typeof o&&(u=new t({descriptor:o,root:this.root,owner:i}),o=u.toString(),u.teardown()),this.name=o,n.a?this.params=n.a:n.d&&(u=new t({descriptor:n.d,root:this.root,owner:i}),this.params=u.toArgsList(),u.teardown()),this._fn=r.transitions[o],!this._fn){if(a='Missing "'+o+'" transition. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#transitions',r.debug)throw new Error(a);return void e(a)}},a.prototype={init:n,getStyle:r,setStyle:i,animateStyle:s,processParams:o,resetStyle:u},a}(Y,Hn,$n,Kn,Qn,nr,ir,sr),ur=function(e,t){return function(n,r,i,s){var o,u,a;!r.transitionsEnabled||r._parent&&!r._parent.transitionsEnabled||(o=new t(n,r,i,s),o._fn&&(u=o.node,(a=u._ractive.transition)&&a.complete(),u._ractive.transition=o,e.addTransition(o)))}}(A,or),ar=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){function g(e){do if("select"===e.lcName)return e;while(e=e.parent)}return function(y,b,w){var E,S,x,T,N,C,k,L,A,O,M,_;if(y.type=t.ELEMENT,E=y.parentFragment=b.parentFragment,S=E.pNode,x=y.descriptor=b.descriptor,y.parent=b.pElement,y.root=O=E.root,y.index=b.index,y.lcName=x.e.toLowerCase(),y.eventListeners=[],y.customEventListeners=[],y.cssDetachQueue=[],S&&(T=y.namespace=a(x,S),N=T!==n.html?m(x.e):x.e,y.node=o(N,T),O.css&&S===O.el&&y.node.setAttribute("data-rvcguid",O.constructor._guid||O._guid),i(y.node,"_ractive",{value:{proxy:y,keypath:u(E),index:E.indexRefs,events:r(null),root:O}})),C=l(y,x.a),x.f){if(y.node&&y.node.getAttribute("contenteditable")&&y.node.innerHTML){if(_="A pre-populated contenteditable element should not have children",O.debug)throw new Error(_);s(_)}c(y,y.node,x,w)}w&&x.v&&p(y,x.v),w&&(O.twoway&&(y.bind(),y.node.getAttribute("contenteditable")&&y.node._ractive.binding&&y.node._ractive.binding.update()),C.name&&!C.name.twoway&&C.name.update(),"IMG"===y.node.tagName&&((k=y.attributes.width)||(L=y.attributes.height))&&y.node.addEventListener("load",A=function(){k&&(y.node.width=k.value),L&&(y.node.height=L.value),y.node.removeEventListener("load",A,!1)},!1),w.appendChild(y.node),x.o&&h(x.o,O,y),x.t1&&v(x.t1,O,y,!0),"OPTION"===y.node.tagName&&("SELECT"===S.tagName&&(M=S._ractive.binding)&&M.deferUpdate(),C.value||f(y,"value",x.f),y.node._ractive.value==S._ractive.value&&(y.node.selected=!0)),y.node.autofocus&&e.focus(y.node)),"option"===y.lcName&&(y.select=g(y.parent)),d(y)}}(A,B,s,Dt,a,Y,o,T,cn,jn,Fn,Rn,zn,Xn,Vn,ur,hn),fr=function(e,t){function n(e){var t,n,r,i,s;for(i=e.liveQueries.length;i--;)if(t=e.liveQueries[i],n=t.selector,t._remove(e.node),e.matchingStaticNodes&&(r=e.matchingStaticNodes[n]))for(s=r.length;s--;)t.remove(r[s])}return function(r){var i,s,o;for(r&&(this.willDetach=!0,e.detachWhenReady(this)),this.fragment&&this.fragment.teardown(!1);this.attributes.length;)this.attributes.pop().teardown();if(this.node){for(i in this.node._ractive.events)this.node._ractive.events[i].teardown();(s=this.node._ractive.binding)&&(s.teardown(),o=this.root._twowayBindings[s.attr.keypath],o.splice(o.indexOf(s),1))}this.decorator&&this.decorator.teardown(),this.descriptor.t2&&t(this.descriptor.t2,this.root,this,!1),this.liveQueries&&n(this)}}(A,ur),lr=function(e){return function(t,n,r,i){var s,o,u,a,f,l,c,h,p;for(s=this.attributes.length;s--;)this.attributes[s].reassign(t,n,r,i);if(o=this.node._ractive){e(o,"keypath",r,i),void 0!=t&&(o.index[t]=n);for(u in o.events)for(a=o.events[u].proxies,s=a.length;s--;)f=a[s],"object"==typeof f.n&&f.a.reassign(t,n,r,i),f.d&&f.d.reassign(t,n,r,i);(l=o.binding)&&l.keypath.substr(0,r.length)===r&&(c=o.root._twowayBindings[l.keypath],c.splice(c.indexOf(l),1),l.keypath=l.keypath.replace(r,i),c=o.root._twowayBindings[l.keypath]||(o.root._twowayBindings[l.keypath]=[]),c.push(l))}if(this.fragment&&this.fragment.reassign(t,n,r,i),h=this.liveQueries)for(p=this.root,s=h.length;s--;)h[s]._makeDirty()}}(Ft),cr="area base br col command doctype embed hr img input keygen link meta param source track wbr".split(" "),hr=function(e,t){function n(e){var n,r,i,s,o;if(n=e.attributes.value.value,r=e.select.attributes.value,i=r.interpolator){if(s=e.root.get(i.keypath||i.ref),s==n)return!0;if(e.select.attributes.multiple&&t(s))for(o=s.length;o--;)if(s[o]==n)return!0}}function r(e){var t,n,r,i;return t=e.attributes,n=t.type,r=t.value,i=t.name,n&&"radio"===n.value&&r&&i.interpolator&&r.value===i.interpolator.value?!0:void 0}return function(){var t,i,s,o;for(t="<"+(this.descriptor.y?"!doctype":this.descriptor.e),s=this.attributes.length,i=0;s>i;i+=1)(o=this.attributes[i].toString())&&(t+=" "+o);return"option"===this.lcName&&n(this)&&(t+=" selected"),"input"===this.lcName&&r(this)&&(t+=" checked"),t+=">",this.html?t+=this.html:this.fragment&&(t+=this.fragment.toString()),-1===e.indexOf(this.descriptor.e)&&(t+="</"+this.descriptor.e+">"),this.stringifying=!1,t}}(cr,M),pr=function(e){return function(t){var n;return e(this.node,t)?this.node:this.html&&(n=this.node.querySelector(t))?n:this.fragment&&this.fragment.find?this.fragment.find(t):void 0}}(ot),dr=function(e){return function(t,n){var r,i;n._test(this,!0)&&n.live&&(this.liveQueries||(this.liveQueries=[])).push(n),this.html&&(r=e(this,t),n.push.apply(n,r),n.live&&!i&&(this.liveQueries||(this.liveQueries=[])).push(n)),this.fragment&&this.fragment.findAll(t,n)}}(qn),vr=function(e){return this.fragment?this.fragment.findComponent(e):void 0},mr=function(e,t){this.fragment&&this.fragment.findAllComponents(e,t)},gr=function(){var e=this.attributes;if(this.node&&(this.binding&&(this.binding.teardown(),this.binding=null),!(this.node.getAttribute("contenteditable")&&e.value&&e.value.bind())))switch(this.descriptor.e){case"select":case"textarea":return void (e.value&&e.value.bind());case"input":if("radio"===this.node.type||"checkbox"===this.node.type){if(e.name&&e.name.bind())return;if(e.checked&&e.checked.bind())return}if(e.value&&e.value.bind())return}},yr=function(e,t,n,r,i,s,o,u,a,f,l){var c=function(e,t){n(this,e,t)};return c.prototype={detach:function(){var n;if(this.node)return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this.node;if(this.cssDetachQueue.length){for(e.start();n===this.cssDetachQueue.pop();)t.remove(n);e.end()}},teardown:r,reassign:i,firstNode:function(){return this.node},findNextNode:function(){return null},bubble:function(){},toString:s,find:o,findAll:u,findComponent:a,findAllComponents:f,bind:l},c}(A,E,ar,fr,lr,hr,pr,dr,vr,mr,gr),br={missingParser:"Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser"},wr={},Er=function(e){var t,n,r;for(r="";e.length;){if(t=e.indexOf("<!--"),n=e.indexOf("-->"),-1===t&&-1===n){r+=e;break}if(-1!==t&&-1===n)throw"Illegal HTML - expected closing comment sequence ('-->')";if(-1!==n&&-1===t||t>n)throw"Illegal HTML - unexpected closing comment sequence ('-->')";r+=e.substr(0,t),e=e.substring(n+3)}return r},Sr=function(e){return function(t){var n,r,i,s,o,u;for(o=/^\s*\r?\n/,u=/\r?\n\s*$/,n=2;n<t.length;n+=1)r=t[n],i=t[n-1],s=t[n-2],r.type===e.TEXT&&i.type===e.MUSTACHE&&i.mustacheType!==e.PARTIAL&&s.type===e.TEXT&&u.test(s.value)&&o.test(r.value)&&(i.mustacheType!==e.INTERPOLATOR&&i.mustacheType!==e.TRIPLE&&(s.value=s.value.replace(u,"\n")),r.value=r.value.replace(o,""),""===r.value&&t.splice(n--,1));return t}}(B),xr=function(e){return function(t){var n,r,i,s;for(n=0;n<t.length;n+=1)r=t[n],i=t[n-1],s=t[n+1],(r.mustacheType===e.COMMENT||r.mustacheType===e.DELIMCHANGE)&&(t.splice(n,1),i&&s&&i.type===e.TEXT&&s.type===e.TEXT&&(i.value+=s.value,t.splice(n,1)),n-=1);return t}}(B),Tr=function(e){var t=e(/^[^\s=]+/);return function(e){var n,r,i;return e.getStringMatch("=")?(n=e.pos,e.allowWhitespace(),(r=t(e))?(e.allowWhitespace(),(i=t(e))?(e.allowWhitespace(),e.getStringMatch("=")?[r,i]:(e.pos=n,null)):(e.pos=n,null)):(e.pos=n,null)):null}}(Sn),Nr=function(e){var t={"#":e.SECTION,"^":e.INVERTED,"/":e.CLOSING,">":e.PARTIAL,"!":e.COMMENT,"&":e.TRIPLE};return function(e){var n=t[e.str.charAt(e.pos)];return n?(e.pos+=1,n):null}}(B),Cr=function(e,t,n){function r(t){for(var n=[];t.t===e.MEMBER&&t.r.t===e.REFINEMENT;)n.unshift(t.r),t=t.x;return t.t!==e.REFERENCE?null:{r:t.n,m:n}}var i=t(/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/),s=/^[0-9][1-9]*$/;return function(t,o){var u,a,f,l,c,h,p,d,v;if(u=t.pos,a={type:o?e.TRIPLE:e.MUSTACHE},!(o||((l=t.getExpression())&&(a.mustacheType=e.INTERPOLATOR,t.allowWhitespace(),t.getStringMatch(t.delimiters[1])?t.pos-=t.delimiters[1].length:(t.pos=u,l=null)),l||(f=n(t),f===e.TRIPLE?a={type:e.TRIPLE}:a.mustacheType=f||e.INTERPOLATOR,f!==e.COMMENT&&f!==e.CLOSING||(h=t.remaining(),p=h.indexOf(t.delimiters[1]),-1===p)))))return a.ref=h.substr(0,p),t.pos+=p,a;if(!l&&(t.allowWhitespace(),l=t.getExpression(),h=t.remaining(),d=o?t.tripleDelimiters[1]:t.delimiters[1],h.substr(0,d.length)!==d&&":"!==h.charAt(0)&&(t.pos=u,h=t.remaining(),p=h.indexOf(t.delimiters[1]),-1!==p)))return a.ref=h.substr(0,p).trim(),t.pos+=p,a;for(;l.t===e.BRACKETED&&l.x;)l=l.x;return l.t===e.REFERENCE?a.ref=l.n:l.t===e.NUMBER_LITERAL&&s.test(l.v)?a.ref=l.v:(v=r(l))?a.keypathExpression=v:a.expression=l,c=i(t),null!==c&&(a.indexRef=c),a}}(B,Sn,Nr),kr=function(e,t,n){function r(r,i){var s,o,u=r.pos;return o=i?r.tripleDelimiters:r.delimiters,r.getStringMatch(o[0])?(s=t(r))?r.getStringMatch(o[1])?(r[i?"tripleDelimiters":"delimiters"]=s,{type:e.MUSTACHE,mustacheType:e.DELIMCHANGE}):(r.pos=u,null):(r.allowWhitespace(),s=n(r,i),null===s?(r.pos=u,null):(r.allowWhitespace(),r.getStringMatch(o[1])?s:(r.pos=u,null))):null}return function(){var e=this.tripleDelimiters[0].length>this.delimiters[0].length;return r(this,e)||r(this,!e)}}(B,Tr,Cr),Lr=function(e){return function(){var t,n,r;if(!this.getStringMatch("<!--"))return null;if(n=this.remaining(),r=n.indexOf("-->"),-1===r)throw new Error('Unexpected end of input (expected "-->" to close comment)');return t=n.substr(0,r),this.pos+=r+3,{type:e.COMMENT,content:t}}}(B),Ar=function(e,t){var n,r,i;for(n=t.length;n--;){if(r=e.indexOf(t[n]),!r)return 0;-1!==r&&(!i||i>r)&&(i=r)}return i||-1},Or=function(e,t,n){var r,i,s,o,u,a,f,l,c,h,p,d,v;return r=function(){return i(this)||s(this)},i=function(t){var n,r,i,s;return n=t.pos,t.inside?null:t.getStringMatch("<")?(r={type:e.TAG},t.getStringMatch("!")&&(r.doctype=!0),r.name=o(t),r.name?(i=u(t),i&&(r.attrs=i),t.allowWhitespace(),t.getStringMatch("/")&&(r.selfClosing=!0),t.getStringMatch(">")?(s=r.name.toLowerCase(),("script"===s||"style"===s)&&(t.inside=s),r):(t.pos=n,null)):(t.pos=n,null)):null},s=function(t){var n,r,i;if(n=t.pos,i=function(e){throw new Error("Unexpected character "+t.remaining().charAt(0)+" (expected "+e+")")},!t.getStringMatch("<"))return null;if(r={type:e.TAG,closing:!0},t.getStringMatch("/")||i('"/"'),r.name=o(t),r.name||i("tag name"),t.getStringMatch(">")||i('">"'),t.inside){if(r.name.toLowerCase()!==t.inside)return t.pos=n,null;t.inside=null}return r},o=t(/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/),u=function(e){var t,n,r;if(t=e.pos,!e.getStringMatch(" ")&&!e.getStringMatch("\n"))return null;if(e.allowWhitespace(),r=a(e),!r)return e.pos=t,null;for(n=[];null!==r;)n.push(r),e.allowWhitespace(),r=a(e);return n},a=function(e){var t,n,r;return(n=f(e))?(t={name:n},r=l(e),r&&(t.value=r),t):null},f=t(/^[^\s"'>\/=]+/),l=function(e){var t,n;return t=e.pos,e.allowWhitespace(),e.getStringMatch("=")?(e.allowWhitespace(),n=v(e,"'")||v(e,'"')||c(e),null===n?(e.pos=t,null):n):(e.pos=t,null)},p=t(/^[^\s"'=<>`]+/),h=function(t){var n,r,i;return n=t.pos,(r=p(t))?(-1!==(i=r.indexOf(t.delimiters[0]))&&(r=r.substr(0,i),t.pos=n+r.length),{type:e.TEXT,value:r}):null},c=function(e){var t,n;for(t=[],n=e.getMustache()||h(e);null!==n;)t.push(n),n=e.getMustache()||h(e);return t.length?t:null},v=function(e,t){var n,r,i;if(n=e.pos,!e.getStringMatch(t))return null;for(r=[],i=e.getMustache()||d(e,t);null!==i;)r.push(i),i=e.getMustache()||d(e,t);return e.getStringMatch(t)?r:(e.pos=n,null)},d=function(t,r){var i,s,o;if(i=t.pos,o=t.remaining(),s=n(o,[r,t.delimiters[0],t.delimiters[1]]),-1===s)throw new Error("Quoted attribute value must have a closing quote");return s?(t.pos+=s,{type:e.TEXT,value:o.substr(0,s)}):null},r}(B,Sn,Ar),Mr=function(e,t){return function(){var n,r,i;return r=this.remaining(),i=this.inside?"</"+this.inside:"<",(n=this.inside&&!this.interpolate[this.inside]?r.indexOf(i):t(r,[i,this.delimiters[0],this.tripleDelimiters[0]]))?(-1===n&&(n=r.length),this.pos+=n,{type:e.TEXT,value:r.substr(0,n)}):null}}(B,Ar),_r=function(e){return function(t){var n=t.remaining();return"true"===n.substr(0,4)?(t.pos+=4,{t:e.BOOLEAN_LITERAL,v:"true"}):"false"===n.substr(0,5)?(t.pos+=5,{t:e.BOOLEAN_LITERAL,v:"false"}):null}}(B),Dr=function(e,t){return function(n){var r,i,s;return r=n.pos,n.allowWhitespace(),i=t(n),null===i?(n.pos=r,null):(n.allowWhitespace(),n.getStringMatch(":")?(n.allowWhitespace(),s=n.getExpression(),null===s?(n.pos=r,null):{t:e.KEY_VALUE_PAIR,k:i,v:s}):(n.pos=r,null))}}(B,An),Pr=function(e){return function t(n){var r,i,s,o;return r=n.pos,s=e(n),null===s?null:(i=[s],n.getStringMatch(",")?(o=t(n),o?i.concat(o):(n.pos=r,null)):i)}}(Dr),Hr=function(e,t){return function(n){var r,i;return r=n.pos,n.allowWhitespace(),n.getStringMatch("{")?(i=t(n),n.allowWhitespace(),n.getStringMatch("}")?{t:e.OBJECT_LITERAL,m:i}:(n.pos=r,null)):(n.pos=r,null)}}(B,Pr),Br=function ps(e){var t,n,r,i;if(t=e.pos,e.allowWhitespace(),r=e.getExpression(),null===r)return null;if(n=[r],e.allowWhitespace(),e.getStringMatch(",")){if(i=ps(e),null===i)return e.pos=t,null;n=n.concat(i)}return n},jr=function(e,t){return function(n){var r,i;return r=n.pos,n.allowWhitespace(),n.getStringMatch("[")?(i=t(n),n.getStringMatch("]")?{t:e.ARRAY_LITERAL,m:i}:(n.pos=r,null)):(n.pos=r,null)}}(B,Br),Fr=function(e,t,n,r,i){return function(s){var o=e(s)||t(s)||n(s)||r(s)||i(s);return o}}(kn,_r,Cn,Hr,jr),Ir=function(e,t,n){var r,i,s,o;return r=t(/^\.[a-zA-Z_$0-9]+/),i=function(e){var t=s(e);return t?"."+t:null},s=t(/^\[(0|[1-9][0-9]*)\]/),o=/^(?:Array|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)$/,function(t){var s,u,a,f,l,c,h;for(s=t.pos,u="";t.getStringMatch("../");)u+="../";if(u||(f=t.getStringMatch(".")||""),a=n(t)||"",!u&&!f&&o.test(a))return{t:e.GLOBAL,v:a};if("this"!==a||u||f||(a=".",s+=3),l=(u||f)+a,!l)return null;for(;c=r(t)||i(t);)l+=c;return t.getStringMatch("(")&&(h=l.lastIndexOf("."),-1!==h?(l=l.substr(0,h),t.pos=s+l.length):t.pos-=1),{t:e.REFERENCE,n:l}}}(B,Sn,Ln),qr=function(e){return function(t){var n,r;return n=t.pos,t.getStringMatch("(")?(t.allowWhitespace(),(r=t.getExpression())?(t.allowWhitespace(),t.getStringMatch(")")?{t:e.BRACKETED,x:r}:(t.pos=n,null)):(t.pos=n,null)):null}}(B),Rr=function(e,t,n){return function(r){return e(r)||t(r)||n(r)}}(Fr,Ir,qr),Ur=function(e,t){return function(n){var r,i,s;if(r=n.pos,n.allowWhitespace(),n.getStringMatch(".")){if(n.allowWhitespace(),i=t(n))return{t:e.REFINEMENT,n:i};n.expected("a property name")}return n.getStringMatch("[")?(n.allowWhitespace(),s=n.getExpression(),s||n.expected("an expression"),n.allowWhitespace(),n.getStringMatch("]")||n.expected('"]"'),{t:e.REFINEMENT,x:s}):null}}(B,Ln),zr=function(e,t,n,r){return function(i){var s,o,u,a;if(o=t(i),!o)return null;for(;o;)if(s=i.pos,u=r(i))o={t:e.MEMBER,x:o,r:u};else{if(!i.getStringMatch("("))break;if(i.allowWhitespace(),a=n(i),i.allowWhitespace(),!i.getStringMatch(")")){i.pos=s;break}o={t:e.INVOCATION,x:o},a&&(o.o=a)}return o}}(B,Rr,Br,Ur),Wr=function(e,t){var n,r;return r=function(t,n){return function(r){var i,s;return r.getStringMatch(t)?(i=r.pos,r.allowWhitespace(),s=r.getExpression(),s||r.expected("an expression"),{s:t,o:s,t:e.PREFIX_OPERATOR}):n(r)}},function(){var e,i,s,o,u;for(o="! ~ + - typeof".split(" "),u=t,e=0,i=o.length;i>e;e+=1)s=r(o[e],u),u=s;n=u}(),n}(B,zr),Xr=function(e,t){var n,r;return r=function(t,n){return function(r){var i,s,o;if(s=n(r),!s)return null;for(;;){if(i=r.pos,r.allowWhitespace(),!r.getStringMatch(t))return r.pos=i,s;if("in"===t&&/[a-zA-Z_$0-9]/.test(r.remaining().charAt(0)))return r.pos=i,s;if(r.allowWhitespace(),o=n(r),!o)return r.pos=i,s;s={t:e.INFIX_OPERATOR,s:t,o:[s,o]}}}},function(){var e,i,s,o,u;for(o="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),u=t,e=0,i=o.length;i>e;e+=1)s=r(o[e],u),u=s;n=u}(),n}(B,Wr),Vr=function(e,t){return function(n){var r,i,s,o;return(i=t(n))?(r=n.pos,n.allowWhitespace(),n.getStringMatch("?")?(n.allowWhitespace(),(s=n.getExpression())?(n.allowWhitespace(),n.getStringMatch(":")?(n.allowWhitespace(),o=n.getExpression(),o?{t:e.CONDITIONAL,o:[i,s,o]}:(n.pos=r,i)):(n.pos=r,i)):(n.pos=r,i)):(n.pos=r,i)):null}}(B,Xr),$r=function(e){return function(){return e(this)}}(Vr),Jr=function(e,t,n,r,i,s,o){var u;return u=function(e,t){var n;for(this.str=e,this.pos=0,this.delimiters=t.delimiters,this.tripleDelimiters=t.tripleDelimiters,this.interpolate=t.interpolate,this.tokens=[];this.pos<this.str.length;)n=this.getToken(),null===n&&this.remaining()&&this.fail(),this.tokens.push(n)},u.prototype={getToken:function(){var e=this.getMustache()||this.getComment()||this.getTag()||this.getText();return e},getMustache:e,getComment:t,getTag:n,getText:r,getExpression:i,allowWhitespace:s,getStringMatch:o,remaining:function(){return this.str.substring(this.pos)},fail:function(){var e,t;throw e=this.str.substr(0,this.pos).substr(-20),20===e.length&&(e="..."+e),t=this.remaining().substr(0,20),20===t.length&&(t+="..."),new Error("Could not parse template: "+(e?e+"<- ":"")+"failed at character "+this.pos+" ->"+t)},expected:function(e){var t=this.remaining().substr(0,40);throw 40===t.length&&(t+="..."),new Error('Tokenizer failed: unexpected string "'+t+'" (expected '+e+")")}},u}(kr,Lr,Or,Mr,$r,En,wn),Kr=function(e,t,n,r,i){return function(s,o){var u,a;return o=o||{},o.stripComments!==!1&&(s=t(s)),u=new i(s,{delimiters:o.delimiters||e.defaults.delimiters,tripleDelimiters:o.tripleDelimiters||e.defaults.tripleDelimiters,interpolate:{script:o.interpolateScripts!==!1?!0:!1,style:o.interpolateStyles!==!1?!0:!1}}),a=u.tokens,n(a),r(a),a}}(r,Er,Sr,xr,Jr),Qr=function(e){var t,n,r,i,s,o,u,a,f;return t=function(e,t){this.text=t?e.value:e.value.replace(f," ")},t.prototype={type:e.TEXT,toJSON:function(){return this.decoded||(this.decoded=a(this.text))},toString:function(){return this.text}},n={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},r=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],i=new RegExp("&("+Object.keys(n).join("|")+");?","g"),s=/&#x([0-9]+);?/g,o=/&#([0-9]+);?/g,u=function(e){return e?10===e?32:128>e?e:159>=e?r[e-128]:55296>e?e:57343>=e?65533:65535>=e?e:65533:65533},a=function(e){var t;return t=e.replace(i,function(e,t){return n[t]?String.fromCharCode(n[t]):e}),t=t.replace(s,function(e,t){return String.fromCharCode(u(parseInt(t,16)))}),t=t.replace(o,function(e,t){return String.fromCharCode(u(t))})},f=/\s+/g,t}(B),Gr=function(e,t){return function(n,r){return n.type===e.TEXT?(this.pos+=1,new t(n,r)):null}}(B,Qr),Yr=function(e){var t;return t=function(e){this.content=e.content},t.prototype={toJSON:function(){return{t:e.COMMENT,f:this.content}},toString:function(){return"<!--"+this.content+"-->"}},t}(B),Zr=function(e,t){return function(n){return n.type===e.COMMENT?(this.pos+=1,new t(n,this.preserveWhitespace)):null}}(B,Yr),ei=function(e,t){function n(e){return JSON.stringify(String(e))}function r(n,i){var s,o;if(n.t===e.REFERENCE&&-1===i.indexOf(n.n)&&i.unshift(n.n),o=n.o||n.m)if(t(o))r(o,i);else for(s=o.length;s--;)r(o[s],i);n.x&&r(n.x,i),n.r&&r(n.r,i),n.v&&r(n.v,i)}function i(t,r){var s=function(e){return i(e,r)};switch(t.t){case e.BOOLEAN_LITERAL:case e.GLOBAL:case e.NUMBER_LITERAL:return t.v;case e.STRING_LITERAL:return n(t.v);case e.ARRAY_LITERAL:return"["+(t.m?t.m.map(s).join(","):"")+"]";case e.OBJECT_LITERAL:return"{"+(t.m?t.m.map(s).join(","):"")+"}";case e.KEY_VALUE_PAIR:return t.k+":"+i(t.v,r);case e.PREFIX_OPERATOR:return("typeof"===t.s?"typeof ":t.s)+i(t.o,r);case e.INFIX_OPERATOR:return i(t.o[0],r)+("in"===t.s.substr(0,2)?" "+t.s+" ":t.s)+i(t.o[1],r);case e.INVOCATION:return i(t.x,r)+"("+(t.o?t.o.map(s).join(","):"")+")";case e.BRACKETED:return"("+i(t.x,r)+")";case e.MEMBER:return i(t.x,r)+i(t.r,r);case e.REFINEMENT:return t.n?"."+t.n:"["+i(t.x,r)+"]";case e.CONDITIONAL:return i(t.o[0],r)+"?"+i(t.o[1],r)+":"+i(t.o[2],r);case e.REFERENCE:return"${"+r.indexOf(t.n)+"}";default:throw new Error("Could not stringify expression token. This error is unexpected")}}var s=function(e){this.refs=[],r(e,this.refs),this.str=i(e,this.refs)};return s.prototype={toJSON:function(){return this.json||(this.json={r:this.refs,s:this.str}),this.json}},s}(B,Z),ti=function(e,t){function n(n){return n.n?n.n:n.x.t===e.STRING_LITERAL||n.x.t===e.NUMBER_LITERAL?n.x.v:n.x.t===e.REFERENCE?n.x:(new t(n.x)).toJSON()}var r;return r=function(e){this.json={r:e.r,m:e.m.map(n)}},r.prototype={toJSON:function(){return this.json}},r}(B,ei),ni=function(e,t,n){var r=function(r,i){this.type=r.type===e.TRIPLE?e.TRIPLE:r.mustacheType,r.ref&&(this.ref=r.ref),r.keypathExpression&&(this.keypathExpr=new t(r.keypathExpression)),r.expression&&(this.expr=new n(r.expression)),i.pos+=1};return r.prototype={toJSON:function(){var e;return this.json?this.json:(e={t:this.type},this.ref&&(e.r=this.ref),this.keypathExpr&&(e.kx=this.keypathExpr.toJSON()),this.expr&&(e.x=this.expr.toJSON()),this.json=e,e)},toString:function(){return!1}},r}(B,ti,ei),ri=function(e){var t,n,r,i="";if(!e)return"";for(n=0,r=e.length;r>n;n+=1){if(t=e[n].toString(),t===!1)return!1;i+=t}return i},ii=function(e){return function(t,n,r){var i,s;return r||n||(i=e(t),i===!1)?s=t.map(function(e){return e.toJSON(n)}):i}}(ri),si=function(e,t,n,r,i){function s(e,n){var r=e.ref,i=t(n.ref.trim());if(r&&i&&(e.indexRef&&(r+=":"+e.indexRef),r.substr(0,i.length)!==i))throw new Error("Could not parse template: Illegal closing section {{/"+i+"}}. Expected {{/"+e.ref+"}}.")}var o=function(t,n){var o;for(this.ref=t.ref,this.indexRef=t.indexRef,this.inverted=t.mustacheType===e.INVERTED,t.keypathExpression&&(this.keypathExpr=new r(t.keypathExpression)),t.expression&&(this.expr=new i(t.expression)),n.pos+=1,this.items=[],o=n.next();o;){if(o.mustacheType===e.CLOSING){s(this,o),n.pos+=1;break}this.items.push(n.getStub()),o=n.next()}};return o.prototype={toJSON:function(t){var r;return this.json?this.json:(r={t:e.SECTION},this.ref&&(r.r=this.ref),this.indexRef&&(r.i=this.indexRef),this.inverted&&(r.n=!0),this.expr&&(r.x=this.expr.toJSON()),this.keypathExpr&&(r.kx=this.keypathExpr.toJSON()),this.items.length&&(r.f=n(this.items,t)),this.json=r,r)},toString:function(){return!1}},o}(B,v,ii,ti,ei),oi=function(e,t,n){return function(r){return r.type===e.MUSTACHE||r.type===e.TRIPLE?r.mustacheType===e.SECTION||r.mustacheType===e.INVERTED?new n(r,this):new t(r,this):void 0}}(B,ni,si),ui={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote dir div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rp","rt"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tr:["tr"],td:["td","th"],th:["td","th"]},ai=function(e){function t(n){var r,i;if("object"!=typeof n)return n;if(e(n))return n.map(t);r={};for(i in n)n.hasOwnProperty(i)&&(r[i]=t(n[i]));return r}return function(e){var n,r,i,s,o,u;for(i={},n=[],r=[],o=e.length,s=0;o>s;s+=1)if(u=e[s],"intro"===u.name){if(i.intro)throw new Error("An element can only have one intro transition");i.intro=u}else if("outro"===u.name){if(i.outro)throw new Error("An element can only have one outro transition");i.outro=u}else if("intro-outro"===u.name){if(i.intro||i.outro)throw new Error("An element can only have one intro and one outro transition");i.intro=u,i.outro=t(u)}else"proxy-"===u.name.substr(0,6)?(u.name=u.name.substring(6),r.push(u)):"on-"===u.name.substr(0,3)?(u.name=u.name.substring(3),r.push(u)):"decorator"===u.name?i.decorator=u:n.push(u);return i.attrs=n,i.proxies=r,i}}(M),fi=function(e,t){return function(n){var r,i,s,o,u,a,f,l;for(u=function(){throw new Error("Illegal directive")},n.name&&n.value||u(),r={directiveType:n.name},i=n.value,a=[],f=[];i.length;)if(s=i.shift(),s.type===e.TEXT){if(o=s.value.indexOf(":"),-1!==o){o&&a.push({type:e.TEXT,value:s.value.substr(0,o)}),s.value.length>o+1&&(f[0]={type:e.TEXT,value:s.value.substring(o+1)});break}a.push(s)}else a.push(s);return f=f.concat(i),r.name=1===a.length&&a[0].type===e.TEXT?a[0].value:a,f.length&&(1===f.length&&f[0].type===e.TEXT?(l=t("["+f[0].value+"]"),r.args=l?l.value:f[0].value):r.dynamicArgs=f),r}}(B,On),li=function(e,t){var n;return n=function(e,t){var n;for(this.tokens=e||[],this.pos=0,this.options=t,this.result=[];n=this.getStub();)this.result.push(n)},n.prototype={getStub:function(){var e=this.next();return e?this.getText(e)||this.getMustache(e):null},getText:e,getMustache:t,next:function(){return this.tokens[this.pos]}},n}(Gr,oi),ci=function(e,t,n){var r;return r=function(t){var n=new e(t);this.stubs=n.result},r.prototype={toJSON:function(e){var t;return this["json_"+e]?this["json_"+e]:t=this["json_"+e]=n(this.stubs,e)},toString:function(){return void 0!==this.str?this.str:(this.str=t(this.stubs),this.str)}},r}(li,ri,ii),hi=function(e){return function(t){var n,r;if("string"==typeof t.name){if(!t.args&&!t.dynamicArgs)return t.name;r=t.name}else r=(new e(t.name)).toJSON();return n={n:r},t.args?(n.a=t.args,n):(t.dynamicArgs&&(n.d=(new e(t.dynamicArgs)).toJSON()),n)}}(ci),pi=function(e,t,n){return function(r){var i,s,o,u,a,f,l;if(this["json_"+r])return this["json_"+r];if(i={t:e.ELEMENT,e:this.tag},this.doctype&&(i.y=1),this.attributes&&this.attributes.length)for(i.a={},f=this.attributes.length,a=0;f>a;a+=1){if(l=this.attributes[a],s=l.name,i.a[s])throw new Error("You cannot have multiple attributes with the same name");o=null===l.value?null:l.value.toJSON(r),i.a[s]=o}if(this.items&&this.items.length&&(i.f=t(this.items,r)),this.proxies&&this.proxies.length)for(i.v={},f=this.proxies.length,a=0;f>a;a+=1)u=this.proxies[a],i.v[u.directiveType]=n(u);return this.intro&&(i.t1=n(this.intro)),this.outro&&(i.t2=n(this.outro)),this.decorator&&(i.o=n(this.decorator)),this["json_"+r]=i,i}}(B,ii,hi),di=function(e,t){var n;return n="a abbr acronym address applet area b base basefont bdo big blockquote body br button caption center cite code col colgroup dd del dfn dir div dl dt em fieldset font form frame frameset h1 h2 h3 h4 h5 h6 head hr html i iframe img input ins isindex kbd label legend li link map menu meta noframes noscript object ol p param pre q s samp script select small span strike strong style sub sup textarea title tt u ul var article aside audio bdi canvas command data datagrid datalist details embed eventsource figcaption figure footer header hgroup keygen mark meter nav output progress ruby rp rt section source summary time track video wbr".split(" "),function(){var r,i,s,o,u,a,f,l;if(void 0!==this.str)return this.str;if(-1===n.indexOf(this.tag.toLowerCase()))return this.str=!1;if(this.proxies||this.intro||this.outro||this.decorator)return this.str=!1;if(f=e(this.items),f===!1)return this.str=!1;if(l=-1!==t.indexOf(this.tag.toLowerCase()),r="<"+this.tag,this.attributes)for(i=0,s=this.attributes.length;s>i;i+=1){if(u=this.attributes[i].name,-1!==u.indexOf(":"))return this.str=!1;if("id"===u||"intro"===u||"outro"===u)return this.str=!1;if(o=" "+u,null!==this.attributes[i].value){if(a=this.attributes[i].value.toString(),a===!1)return this.str=!1;""!==a&&(o+="=",o+=/[\s"'=<>`]/.test(a)?'"'+a.replace(/"/g,"&quot;")+'"':a)}r+=o}return this.selfClosing&&!l?(r+="/>",this.str=r):(r+=">",l?this.str=r:(r+=f,r+="</"+this.tag+">",this.str=r))}}(ri,cr),vi=function(e,t,n,r,i,s,o,u,a){var f,l,c,h,p,d=/^\s+/,v=/\s+$/;return f=function(o,u,f){var l,c,h,m,g,y,b;if(u.pos+=1,y=function(e){return{name:e.name,value:e.value?new a(e.value):null}},this.tag=o.name,b=o.name.toLowerCase(),"rv-"===b.substr(0,3)&&(n('The "rv-" prefix for components has been deprecated. Support will be removed in a future version'),this.tag=this.tag.substring(3)),f=f||"pre"===b||"style"===b||"script"===b,o.attrs&&(h=i(o.attrs),c=h.attrs,m=h.proxies,u.options.sanitize&&u.options.sanitize.eventAttributes&&(c=c.filter(p)),c.length&&(this.attributes=c.map(y)),m.length&&(this.proxies=m.map(s)),h.intro&&(this.intro=s(h.intro)),h.outro&&(this.outro=s(h.outro)),h.decorator&&(this.decorator=s(h.decorator))),o.doctype&&(this.doctype=!0),o.selfClosing&&(this.selfClosing=!0),-1!==t.indexOf(b)&&(this.isVoid=!0),!this.selfClosing&&!this.isVoid){for(this.siblings=r[b],this.items=[],l=u.next();l&&l.mustacheType!==e.CLOSING;){if(l.type===e.TAG){if(l.closing){l.name.toLowerCase()===b&&(u.pos+=1);break}if(this.siblings&&-1!==this.siblings.indexOf(l.name.toLowerCase()))break}this.items.push(u.getStub(f)),l=u.next()}f||(g=this.items[0],g&&g.type===e.TEXT&&(g.text=g.text.replace(d,""),g.text||this.items.shift()),g=this.items[this.items.length-1],g&&g.type===e.TEXT&&(g.text=g.text.replace(v,""),g.text||this.items.pop()))}},f.prototype={toJSON:o,toString:u},l="a abbr acronym address applet area b base basefont bdo big blockquote body br button caption center cite code col colgroup dd del dfn dir div dl dt em fieldset font form frame frameset h1 h2 h3 h4 h5 h6 head hr html i iframe img input ins isindex kbd label legend li link map menu meta noframes noscript object ol p param pre q s samp script select small span strike strong style sub sup textarea title tt u ul var article aside audio bdi canvas command data datagrid datalist details embed eventsource figcaption figure footer header hgroup keygen mark meter nav output progress ruby rp rt section source summary time track video wbr".split(" "),c="li dd rt rp optgroup option tbody tfoot tr td th".split(" "),h=/^on[a-zA-Z]/,p=function(e){var t=!h.test(e.name);return t},f}(B,cr,Y,ui,ai,fi,pi,di,ci),mi=function(e){return function(t){return this.options.sanitize&&this.options.sanitize.elements&&-1!==this.options.sanitize.elements.indexOf(t.name.toLowerCase())?null:new e(t,this,this.preserveWhitespace)}}(vi),gi=function(e,t,n,r,i){var s;return s=function(e,t){var n,r;for(this.tokens=e||[],this.pos=0,this.options=t,this.preserveWhitespace=t.preserveWhitespace,r=[];n=this.getStub();)r.push(n);this.result=i(r,t.noStringify,!0)},s.prototype={getStub:function(e){var t=this.next();return t?this.getText(t,this.preserveWhitespace||e)||this.getComment(t)||this.getMustache(t)||this.getElement(t):null},getText:e,getComment:t,getMustache:n,getElement:r,next:function(){return this.tokens[this.pos]}},s}(Gr,Zr,oi,mi,ii),yi=function(e,t,n){var r,i,s,o,u;return i=/^\s*$/,s=/<!--\s*\{\{\s*>\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/,o=/<!--\s*\{\{\s*\/\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/,r=function(r,o){var a,f,l;return o=o||{},s.test(r)?u(r,o):(o.sanitize===!0&&(o.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),a=e(r,o),o.preserveWhitespace||(l=a[0],l&&l.type===t.TEXT&&i.test(l.value)&&a.shift(),l=a[a.length-1],l&&l.type===t.TEXT&&i.test(l.value)&&a.pop()),f=(new n(a,o)).result,"string"==typeof f?[f]:f)},u=function(e,t){var n,i,u,a,f,l;for(u={},n="",i=e;f=s.exec(i);){if(a=f[1],n+=i.substr(0,f.index),i=i.substring(f.index+f[0].length),l=o.exec(i),!l||l[1]!==a)throw new Error("Inline partials must have a closing delimiter, and cannot be nested");u[a]=r(i.substr(0,l.index),t),i=i.substring(l.index+l[0].length)}return{main:r(n,t),partials:u}},r}(Kr,B,gi),bi=function(){function e(e,t){var r=n.exec(t)[0];return null===e||r.length<e.length?r:e}var t=/^\s*$/,n=/^\s*/;return function(n){var r,i,s,o;return r=n.split("\n"),i=r[0],void 0!==i&&t.test(i)&&r.shift(),s=r[r.length-1],void 0!==s&&t.test(s)&&r.pop(),o=r.reduce(e,null),o&&(n=r.map(function(e){return e.replace(o,"")}).join("\n")),n}}(),wi=function(e,t,n,r,i,s,o){var u,a,f,l;return u=function(r,u){var c,h,p;if(h=f(r,u))return h;if(t&&(c=document.getElementById(u),c&&"SCRIPT"===c.tagName)){if(!s)throw new Error(e.missingParser);a(s(o(c.text),r.parseOptions),u,i)}if(h=i[u],!h){if(p='Could not find descriptor for partial "'+u+'"',r.debug)throw new Error(p);return n(p),[]}return l(h)},f=function(t,n){var r;if(t.partials[n]){if("string"==typeof t.partials[n]){if(!s)throw new Error(e.missingParser);r=s(t.partials[n],t.parseOptions),a(r,n,t.partials)}return l(t.partials[n])}},a=function(e,t,n){var i;if(r(e)){n[t]=e.main;for(i in e.partials)e.partials.hasOwnProperty(i)&&(n[i]=e.partials[i])}else n[t]=e},l=function(e){return 1===e.length&&"string"==typeof e[0]?e[0]:e},u}(br,u,Y,Z,wr,yi,bi),Ei=function(e,t){var n;return t?n=e.split("\n").map(function(e,n){return n?t+e:e}).join("\n"):e},Si=function(e,t,n,r){var i,s;return r.push(function(){s=r.DomFragment}),i=function(n,r){var i,o=this.parentFragment=n.parentFragment;if(this.type=e.PARTIAL,this.name=n.descriptor.r,this.index=n.index,!n.descriptor.r)throw new Error("Partials must have a static reference (no expressions). This may change in a future version of Ractive.");i=t(o.root,n.descriptor.r),this.fragment=new s({descriptor:i,root:o.root,pNode:o.pNode,owner:this}),r&&r.appendChild(this.fragment.docFrag)},i.prototype={firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},detach:function(){return this.fragment.detach()},reassign:function(e,t,n,r){return this.fragment.reassign(e,t,n,r)},teardown:function(e){this.fragment.teardown(e)},toString:function(){var t,r,i,s;return t=this.fragment.toString(),r=this.parentFragment.items[this.index-1],r&&r.type===e.TEXT?(i=r.descriptor.split("\n").pop(),(s=/^\s+$/.exec(i))?n(t,s[0]):t):t},find:function(e){return this.fragment.find(e)},findAll:function(e,t){return this.fragment.findAll(e,t)},findComponent:function(e){return this.fragment.findComponent(e)},findAllComponents:function(e,t){return this.fragment.findAllComponents(e,t)}},i}(B,wi,Ei,b),xi=function(e,t){var n=function(e,n,r){this.parentFragment=e.parentFragment,this.component=e,this.key=n,this.fragment=new t({descriptor:r,root:e.root,owner:this}),this.selfUpdating=this.fragment.isSimple(),this.value=this.fragment.getValue()};return n.prototype={bubble:function(){this.selfUpdating?this.update():!this.deferred&&this.ready&&(e.addAttribute(this),this.deferred=!0)},update:function(){var e=this.fragment.getValue();this.component.instance.set(this.key,e),this.value=e},teardown:function(){this.fragment.teardown()}},n}(A,Hn),Ti=function(e,t,n,r,i){function s(s,o,u,a){var f,l,c,h,p,d;return c=s.root,h=s.parentFragment,"string"==typeof u?(l=t(u),l?l.value:u):null===u?!0:1===u.length&&u[0].t===e.INTERPOLATOR&&u[0].r?h.indexRefs&&void 0!==h.indexRefs[d=u[0].r]?(s.indexRefBindings[d]=o,h.indexRefs[d]):(p=n(c,u[0].r,h)||u[0].r,a.push({childKeypath:o,parentKeypath:p}),r(c,p)):(f=new i(s,o,u),s.complexParameters.push(f),f.value)}return function(e,t,n,r){var i,o,u;i={},e.complexParameters=[];for(o in n)n.hasOwnProperty(o)&&(u=s(e,o,n[o],r),(void 0!==u||void 0===t[o])&&(i[o]=u));return i}}(B,On,N,G,xi),Ni=function(){function e(e,t){var n,r,i;if(n=e.adapt.length?e.adapt.map(function(t){return"object"==typeof t?t:e.adaptors[t]||t}):[],r=t.length)for(i=0;r>i;i+=1)-1===n.indexOf(t[i])&&n.push(t[i]);return n}return function(t,n,r,i,s){var o,u,a,f,l;return u=t.parentFragment,f=t.root,a={content:s||[]},l=e(f,n.defaults.adapt,n.adaptors),o=new n({el:u.pNode,append:!0,data:r,partials:a,magic:f.magic||n.defaults.magic,modifyArrays:f.modifyArrays,_parent:f,_component:t,adapt:l}),i&&(o.insert(i),o.fragment.pNode=o.el=u.pNode),o}}(),Ci=function(e,t,n){return function(r,i){i.forEach(function(i){var s,o;e(r,r.root,i.parentKeypath,i.childKeypath),s=t(r.instance,i.childKeypath),o=t(r.root,i.parentKeypath),void 0!==s&&void 0===o&&n(r.root,i.parentKeypath,s)})}}(J,G,I),ki=function(e){function t(t,r,i,s){if("string"!=typeof s){if(r.debug)throw new Error(n);return void e(n)}t.on(i,function(){var e=Array.prototype.slice.call(arguments);e.unshift(s),r.fire.apply(r,e)})}var n="Components currently only support simple events - you cannot include arguments. Sorry!";return function(e,n){var r;for(r in n)n.hasOwnProperty(r)&&t(e.instance,e.root,r,n[r])}}(Y),Li=function(e){var t,n;for(t=e.root;t;)(n=t._liveComponentQueries[e.name])&&n.push(e.instance),t=t._parent},Ai=function(e,t,n,r,i,s,o){return function(u,a,f){var l,c,h,p,d;if(l=u.parentFragment=a.parentFragment,c=l.root,u.root=c,u.type=e.COMPONENT,u.name=a.descriptor.e,u.index=a.index,u.indexRefBindings={},u.bindings=[],h=c.components[a.descriptor.e],!h)throw new Error('Component "'+a.descriptor.e+'" not found');d=[],p=n(u,h.data||{},a.descriptor.a,d),r(u,h,p,f,a.descriptor.f),i(u,d),s(u,a.descriptor.v),(a.descriptor.t1||a.descriptor.t2||a.descriptor.o)&&t('The "intro", "outro" and "decorator" directives have no effect on components'),o(u)}}(B,Y,Ti,Ni,Ci,ki,Li),Oi=function(e,t){function n(e){var t,n;t=e.root;do(n=t._liveComponentQueries[e.name])&&n._remove(e);while(t=t._parent)}var r=function(t,n){e(this,t,n)};return r.prototype={firstNode:function(){return this.instance.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},detach:function(){return this.instance.fragment.detach()},teardown:function(e){for(;this.complexParameters.length;)this.complexParameters.pop().teardown();for(;this.bindings.length;)this.bindings.pop().teardown();n(this),this.shouldDestroy=e,this.instance.teardown()},reassign:function(e,n,r,i){var s,o,u=this.instance,a=u._parent;this.bindings.forEach(function(s){var o;s.root===a&&(s.keypath===e&&u.set(s.otherKeypath,n),(o=t(s.keypath,r,i))&&s.reassign(o))}),(s=this.indexRefBindings[e])&&u.set(s,n),(o=this.root._liveComponentQueries[this.name])&&o._makeDirty()},toString:function(){return this.instance.fragment.toString()},find:function(e){return this.instance.fragment.find(e)},findAll:function(e,t){return this.instance.fragment.findAll(e,t)},findComponent:function(e){return e&&e!==this.name?this.instance.fragment?this.instance.fragment.findComponent(e):null:this.instance},findAllComponents:function(e,t){t._test(this,!0),this.instance.fragment&&this.instance.fragment.findAllComponents(e,t)}},r}(Ai,jt),Mi=function(e,t){var n=function(t,n){this.type=e.COMMENT,this.descriptor=t.descriptor,n&&(this.node=document.createComment(t.descriptor.f),n.appendChild(this.node))};return n.prototype={detach:t,teardown:function(e){e&&this.detach()},firstNode:function(){return this.node},toString:function(){return"<!--"+this.descriptor.f+"-->"}},n}(B,Ut),_i=function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=function(e){e.pNode&&(this.docFrag=document.createDocumentFragment()),"string"==typeof e.descriptor?(this.html=e.descriptor,this.docFrag&&(this.nodes=r(this.html,e.pNode.tagName,e.pNode.namespaceURI,this.docFrag))):n.init(this,e)};return p.prototype={reassign:n.reassign,detach:function(){var e,t;if(this.docFrag){if(this.nodes)for(e=this.nodes.length,t=0;e>t;t+=1)this.docFrag.appendChild(this.nodes[t]);else if(this.items)for(e=this.items.length,t=0;e>t;t+=1)this.docFrag.appendChild(this.items[t].detach());return this.docFrag}},createItem:function(t){if("string"==typeof t.descriptor)return new i(t,this.docFrag);switch(t.descriptor.t){case e.INTERPOLATOR:return new s(t,this.docFrag);case e.SECTION:return new o(t,this.docFrag);case e.TRIPLE:return new u(t,this.docFrag);case e.ELEMENT:return this.root.components[t.descriptor.e]?new l(t,this.docFrag):new a(t,this.docFrag);case e.PARTIAL:return new f(t,this.docFrag);case e.COMMENT:return new c(t,this.docFrag);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/RactiveJS/Ractive/issues. Thanks!")}},teardown:function(e){var t;if(this.nodes&&e)for(;t=this.nodes.pop();)t.parentNode.removeChild(t);else if(this.items)for(;this.items.length;)this.items.pop().teardown(e);this.nodes=this.items=this.docFrag=null},firstNode:function(){return this.items&&this.items[0]?this.items[0].firstNode():this.nodes?this.nodes[0]||null:null},findNextNode:function(e){var t=e.index;return this.items[t+1]?this.items[t+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this)},toString:function(){var e,t,n,r;if(this.html)return this.html;if(e="",!this.items)return e;for(n=this.items.length,t=0;n>t;t+=1)r=this.items[t],e+=r.toString();return e},find:function(e){var n,r,i,s,o;if(this.nodes){for(r=this.nodes.length,n=0;r>n;n+=1)if(s=this.nodes[n],1===s.nodeType){if(t(s,e))return s;if(o=s.querySelector(e))return o}return null}if(this.items){for(r=this.items.length,n=0;r>n;n+=1)if(i=this.items[n],i.find&&(o=i.find(e)))return o;return null}},findAll:function(e,n){var r,i,s,o,u,a,f;if(this.nodes){for(i=this.nodes.length,r=0;i>r;r+=1)if(o=this.nodes[r],1===o.nodeType&&(t(o,e)&&n.push(o),u=o.querySelectorAll(e)))for(a=u.length,f=0;a>f;f+=1)n.push(u[f])}else if(this.items)for(i=this.items.length,r=0;i>r;r+=1)s=this.items[r],s.findAll&&s.findAll(e,n);return n},findComponent:function(e){var t,n,r,i;if(this.items){for(t=this.items.length,n=0;t>n;n+=1)if(r=this.items[n],r.findComponent&&(i=r.findComponent(e)))return i;return null}},findAllComponents:function(e,t){var n,r,i;if(this.items)for(r=this.items.length,n=0;r>n;n+=1)i=this.items[n],i.findAllComponents&&i.findAllComponents(e,t);return t}},h.DomFragment=p,p}(B,ot,qt,Rt,zt,nn,fn,ln,yr,Si,Oi,Mi,b),Di=function(e,t,n){function r(e){for(var t;t=e._childInitQueue.pop();)t.instance.init&&t.instance.init(t.options),r(t.instance)}return function(i,s){if(this._rendering=!0,e.start(this,s),!this._initing)throw new Error("You cannot call ractive.render() directly!");this.constructor.css&&t.add(this.constructor),this.fragment=new n({descriptor:this.template,root:this,owner:this,pNode:i}),i&&i.appendChild(this.fragment.docFrag),this._parent&&this._parent._rendering||r(this),delete this._rendering,e.end()}}(A,E,_i),Pi=function(e){return function(){return e("renderHTML() has been deprecated and will be removed in a future version. Please use toHTML() instead"),this.toHTML()}}(Y),Hi=function(e,t,n,r){return function(i,s){var o,u,a;if("function"==typeof i?(s=i,i={}):i=i||{},"object"!=typeof i)throw new Error("The reset method takes either no arguments, or an object containing new data");return o=new e(function(e){u=e}),s&&o.then(s),t.start(this,u),(a=this._wrapped[""])&&a.reset?a.reset(i)===!1&&(this.data=i):this.data=i,n(this,""),r(this,""),t.end(),this.fire("reset",i),o}}(d,A,j,k),Bi=function(e,t,n,r,i){return function(s,o,u){var a,f,l;if(f=new r(function(e){l=e}),e.start(this,l),t(s)){a=s,u=o;for(s in a)a.hasOwnProperty(s)&&(o=a[s],s=n(s),i(this,s,o))}else s=n(s),i(this,s,o);return e.end(),u&&f.then(u.bind(this)),f}}(A,Z,v,d,I),ji=function(e){return function(t,n){return e(this,t,void 0===n?-1:-n)}}(c),Fi=function(e,t,n,r,i){return function(s){var o,u,a,f,l,c,h,p;if(this.fire("teardown"),f=!this.component||this.component.shouldDestroy,this.constructor.css)if(f)l=s,s=function(){l&&l.call(this),t.remove(this.constructor)};else{c=this.component.parentFragment;do c.owner.type===e.ELEMENT&&c.owner.willDetach&&(h=c.owner);while(!h&&(c=c.parent));if(!h)throw new Error("A component is being torn down but doesn't have a nearest detaching element... this shouldn't happen!");h.cssDetachQueue.push(this.constructor)}for(u=new r(function(e){a=e}),n.start(this,a),this.fragment.teardown(f);this._animations[0];)this._animations[0].stop();for(o in this._cache)i(this,o);for(;p=this._unresolvedImplicitDependencies.pop();)p.teardown();return n.end(),s&&u.then(s.bind(this)),u}}(B,E,A,d,j),Ii=function(){return this.fragment.toString()},qi=function(e,t){var n;if("string"==typeof e)return n=this.get(e),this.set(e,!n,t);if(this.debug)throw new Error("Bad arguments")},Ri=function(e,t,n,r){return function(i,s){var o,u;return"function"==typeof i?(s=i,i=""):i=i||"",o=new t(function(e){u=e}),e.start(this,u),n(this,i),r(this,i),e.end(),this.fire("update",i),s&&o.then(s.bind(this)),o}}(A,d,j,k),Ui=function(e,t,n){function r(e,i,s,o,u){var a,f,l,c,h,p;if(a=e._twowayBindings[i])for(l=a.length;l--;)c=a[l],(!c.radioName||c.node.checked)&&(c.checkboxName?c.changed()&&o[i]!==!0&&(o[i]=!0,o.push(i)):(h=c.attr.value,p=c.value(),t(h,p)||n(h,p)||(s[i]=p)));if(u&&(f=e._depsMap[i]))for(l=f.length;l--;)r(e,f[l],s,o,u)}return function(t,n){var i,s,o;if("string"!=typeof t&&(t="",n=!0),r(this,t,i={},s=[],n),o=s.length)for(;o--;)t=s[o],i[t]=e(this,t);this.set(i)}}(S,gn,p),zi=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x){return{add:e,animate:t,detach:n,find:r,findAll:i,findAllComponents:s,findComponent:o,fire:u,get:a,insert:f,merge:l,observe:c,off:h,on:p,render:d,renderHTML:v,reset:m,set:g,subtract:y,teardown:b,toHTML:w,toggle:E,update:S,updateModel:x}}(h,rt,it,st,vt,mt,gt,yt,wt,St,Nt,Ot,Mt,_t,Di,Pi,Hi,Bi,ji,Fi,Ii,qi,Ri,Ui),Wi={},Xi={linear:function(e){return e},easeIn:function(e){return Math.pow(e,3)},easeOut:function(e){return Math.pow(e-1,3)+1},easeInOut:function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)}},Vi=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t,n;return t=16*Math.random()|0,n="x"==e?t:3&t|8,n.toString(16)})},$i=function(e){for(var t,n,r=Array.prototype.slice.call(arguments,1);n=r.shift();)for(t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e},Ji=["adaptors","components","decorators","easing","events","interpolators","partials","transitions","data"],Ki=function(){function e(e){return e.trim?e.trim():e.replace(/^\s+/,"").replace(/\s+$/,"")}function t(e){return e.str}var n=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,r=/\/\*.*?\*\//g,i=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~]+)?\s*[\s\+\>\~]?)\s*/g;return function(s,o){var u,a;return a=function(e){var n,r,s,u,a,f,l,c,h=[];for(n=[];r=i.exec(e);)n.push({str:r[0],base:r[1],modifiers:r[2]});for(u='[data-rvcguid="'+o+'"]',a=n.map(t),c=n.length;c--;)l=a.slice(),s=n[c],l[c]=s.base+u+s.modifiers||"",f=a.slice(),f[c]=u+" "+f[c],h.push(l.join(" "),f.join(" "));return h.join(", ")},u=s.replace(r,"").replace(n,function(t,n){var r,i;return r=n.split(",").map(e),i=r.map(a).join(", ")+" ",t.replace(n,i)})}}(),Qi=function(e,t,n,r){return function(i,s){e.forEach(function(e){s[e]&&(i[e]=t(s[e]))}),n(i,"defaults",{value:t(s.defaults)}),s.css&&n(i,"css",{value:s.defaults.noCssTransform?s.css:r(s.css,i._guid)})}}(Ji,Dt,a,Ki),Gi=function(e,t){return/_super/.test(e)?function(){var n,r=this._super;return this._super=t,n=e.apply(this,arguments),this._super=r,n}:e},Yi=function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},Zi=function(e,t,n,r,i,s){var o={};return t.concat(e.keys).forEach(function(e){o[e]=!0}),function(u,a){var f,l;t.forEach(function(e){var t=a[e];t&&(u[e]?i(u[e],t):u[e]=t)}),e.keys.forEach(function(e){var t=a[e];void 0!==t&&(u.defaults[e]="function"==typeof t&&"function"==typeof u[e]?r(t,u[e]):a[e])});for(f in a)!o[f]&&a.hasOwnProperty(f)&&(l=a[f],u.prototype[f]="function"==typeof l&&"function"==typeof u.prototype[f]?r(l,u.prototype[f]):l);a.css&&n(u,"css",{value:u.defaults.noCssTransform?a.css:s(a.css,u._guid)})}}(r,Ji,a,Gi,Yi,Ki),es=function(e,t){return function(n,r){e(n.defaults.template)&&(n.partials||(n.partials={}),t(n.partials,n.defaults.template.partials),r.partials&&t(n.partials,r.partials),n.defaults.template=n.defaults.template.main)}}(Z,Yi),ts=function(e,t,n){return function(r){var i;if("string"==typeof r.defaults.template){if(!n)throw new Error(e.missingParser);if("#"===r.defaults.template.charAt(0)&&t){if(i=document.getElementById(r.defaults.template.substring(1)),!i||"SCRIPT"!==i.tagName)throw new Error("Could not find template element ("+r.defaults.template+")");r.defaults.template=n(i.innerHTML,r)}else r.defaults.template=n(r.defaults.template,r.defaults)}}}(br,u,yi),ns=function(e,t){return function(n){var r;if(n.partials)for(r in n.partials)if(n.partials.hasOwnProperty(r)&&"string"==typeof n.partials[r]){if(!t)throw new Error(e.missingParser);n.partials[r]=t(n.partials[r],n)}}}(br,yi),rs=function(){function e(e){var n="var __ractive=this;return("+e.replace(t,function(e,t){return'__ractive.get("'+t+'")'})+")";return new Function(n)}var t=/\$\{([^\}]+)\}/g;return function(t){return"function"==typeof t?{get:t}:"string"==typeof t?{get:e(t)}:("object"==typeof t&&"string"==typeof t.get&&(t={get:e(t.get),set:t.set}),t)}}(),is=function(e,t,n){var r=function(e,n){this.root=e.ractive,this.keypath=n,this.priority=0,this.computation=e,t(this)};return r.prototype={update:function(){var t;t=this.root.get(this.keypath),e(t,this.value)||this.computation.bubble()},teardown:function(){n(this)}},r}(p,V,$),ss=function(e,t,n,r){function i(e,t,n){var i,s,o;for(i=t.length;i--;)s=t[i],n[s.keypath]||(t.splice(i,1),t[s.keypath]=null,s.teardown());for(i=n.length;i--;)o=n[i],t[o]||(s=new r(e,o),t.push(t[o]=s))}var s=function(e,t,n){this.ractive=e,this.key=t,this.getter=n.get,this.setter=n.set,this.watchers=[],this.update()};return s.prototype={set:function(e){if(this.setting)return void (this.value=e);if(!this.setter)throw new Error("Computed properties without setters are read-only in the current version");this.setter.call(this.ractive,e)},update:function(){var t,r,s,o;t=this.ractive,r=t._captured,r||(t._captured=[]);try{s=this.getter.call(t)}catch(u){t.debug&&e('Failed to compute "'+this.key+'": '+u.message||u),o=!0}i(this,this.watchers,t._captured),t._captured=r,o||(this.setting=!0,this.value=s,n(t,this.key,s),this.setting=!1),this.deferred=!1},bubble:function(){this.watchers.length<=1?this.update():this.deferred||(t.addComputation(this),this.deferred=!0)}},s}(Y,A,I,is),os=function(e,t){return function(n,r){var i,s;for(i in r)s=e(r[i]),n._computations[i]=new t(n,i,s)}}(rs,ss),us=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){var g=["adapt","modifyArrays","magic","twoway","lazy","debug","isolated"];return function(y,b){var w,E,S,x,T,N,C;if(c(b.adaptors)&&(i("The `adaptors` option, to indicate which adaptors should be used with a given Ractive instance, has been deprecated in favour of `adapt`. See [TODO] for more information"),b.adapt=b.adaptors,delete b.adaptors),w=y.constructor.defaults,n.keys.forEach(function(e){void 0===b[e]&&(b[e]=w[e])}),g.forEach(function(e){y[e]=b[e]}),"string"==typeof y.adapt&&(y.adapt=[y.adapt]),y.magic&&!d)throw new Error("Getters and setters (magic mode) are not supported in this browser");if(a(y,{_initing:{value:!0,writable:!0},_guid:{value:h()},_subs:{value:s(null),configurable:!0},_cache:{value:{}},_cacheMap:{value:s(null)},_deps:{value:[]},_depsMap:{value:s(null)},_patternObservers:{value:[]},_evaluators:{value:s(null)},_computations:{value:s(null)},_twowayBindings:{value:{}},_animations:{value:[]},nodes:{value:{}},_wrapped:{value:s(null)},_liveQueries:{value:[]},_liveComponentQueries:{value:[]},_childInitQueue:{value:[]},_changes:{value:[]},_unresolvedImplicitDependencies:{value:[]}}),b._parent&&b._component&&(a(y,{_parent:{value:b._parent},component:{value:b._component}}),b._component.instance=y),b.el&&(y.el=f(b.el),!y.el&&y.debug))throw new Error("Could not find container element");if(b.eventDefinitions&&(i("ractive.eventDefinitions has been deprecated in favour of ractive.events. Support will be removed in future versions"),b.events=b.eventDefinitions),r.forEach(function(e){y.constructor[e]?y[e]=o(s(y.constructor[e]),b[e]):b[e]&&(y[e]=b[e])}),y.data||(y.data={}),C=w.computed?o(s(w.computed),b.computed):b.computed,C&&m(y,C),E=b.template,"string"==typeof E){if(!v)throw new Error(t.missingParser);if("#"===E.charAt(0)&&e){if(S=document.getElementById(E.substring(1)),!S)throw new Error("Could not find template element ("+E+")");x=v(S.innerHTML,b)}else x=v(E,b)}else x=E;l(x)&&(u(y.partials,x.partials),x=x.main),x&&1===x.length&&"string"==typeof x[0]&&(x=x[0]),y.template=x,o(y.partials,b.partials),y.parseOptions={preserveWhitespace:b.preserveWhitespace,sanitize:b.sanitize,stripComments:b.stripComments},y.transitionsEnabled=b.noIntro?!1:b.transitionsEnabled,e&&!y.el&&(y.el=document.createDocumentFragment()),y.el&&!b.append&&(y.el.innerHTML=""),T=new p(function(e){N=e}),y.render(y.el,N),b.complete&&T.then(b.complete.bind(y)),y.transitionsEnabled=b.transitionsEnabled,y._initing=!1}}(u,br,r,Ji,Y,Dt,$i,rr,f,Et,Z,M,Vi,d,z,yi,os),as=function(e,t,n){return function(r,i,s){e.keys.forEach(function(e){var n=s[e],r=i.defaults[e];"function"==typeof n&&"function"==typeof r&&(s[e]=t(n,r))}),r.beforeInit&&r.beforeInit(s),n(r,s),s._parent&&s._parent._rendering?s._parent._childInitQueue.push({instance:r,options:s}):r.init&&r.init(s)}}(r,Gi,us),fs=function(e,t,n,r,i,s,o,u,a,f,l){var c;return l.push(function(){c=l.Ractive}),function(l){var h,p,d,v=this;if(l.prototype instanceof c&&(l=r({},l,l.prototype,l.defaults)),h=function(e){f(this,h,e||{})},h.prototype=e(v.prototype),h.prototype.constructor=h,t(h,{extend:{value:v.extend},_guid:{value:n()}}),i(h,v),s(h,l),h.adaptors&&(d=h.defaults.adapt.length))for(;d--;)p=h.defaults.adapt[d],"string"==typeof p&&(h.defaults.adapt[d]=h.adaptors[p]||p);return l.template&&(u(h),o(h,l),a(h)),h}}(Dt,f,Vi,$i,Qi,Zi,es,ts,ns,as,b),ls=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d=function(e){h(this,e)};return d.prototype=r,n(d,{partials:{value:i},adaptors:{value:s},easing:{value:u},transitions:{value:{}},events:{value:{}},components:{value:o},decorators:{value:{}},interpolators:{value:a},defaults:{value:e.defaults},svg:{value:t},VERSION:{value:"0.4.0"}}),d.eventDefinitions=d.events,d.prototype.constructor=d,d.Promise=f,d.extend=l,d.parse=c,p.Ractive=d,d}(r,i,f,zi,wr,D,Wi,Xi,et,d,fs,yi,us,b),cs=function(e,t){for(var n="function";t.length;)t.pop()();if(typeof Date.now!==n||typeof String.prototype.trim!==n||typeof Object.keys!==n||typeof Array.prototype.indexOf!==n||typeof Array.prototype.forEach!==n||typeof Array.prototype.map!==n||typeof Array.prototype.filter!==n||"undefined"!=typeof window&&typeof window.addEventListener!==n)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");return"undefined"!=typeof window&&window.Node&&!window.Node.prototype.contains&&window.HTMLElement&&window.HTMLElement.prototype.contains&&(window.Node.prototype.contains=window.HTMLElement.prototype.contains),e}(ls,b,n);"undefined"!=typeof module&&module.exports?module.exports=cs:"function"==typeof define&&define.amd&&define("ractive",[],function(){return cs}),e.Ractive=cs,cs.noConflict=function(){return e.Ractive=t,cs}}("undefined"!=typeof window?window:this),define("shape",[],function(){var e=function(e,t,n){var r=document.getElementById("canvas"),i=r.getContext("2d"),s=r.width,o=r.height,u=.25*s,a=.1*s;i.clearRect(0,0,r.width,r.height),i.fillStyle="black",i.beginPath(),i.arc(s/2,s/2,s/2,0,Math.PI*2),i.fill(),i.globalCompositeOperation="lighter",i.fillStyle="rgb("+e+",0,0)",i.beginPath(),i.arc(s*.25+a,o*.25+a,u,0,Math.PI*2),i.fill(),i.fillStyle="rgb(0,"+t+",0)",i.beginPath(),i.arc(s*.75-a,o*.25+a,u,0,Math.PI*2),i.fill(),i.fillStyle="rgb(0,0,"+n+")",i.beginPath(),i.arc(s*.5,o*.8-a,u,0,Math.PI*2),i.fill()};return{draw:e}}),define("amd-loader",{}),define("rv",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("rv!view/main",[],function(){return[{t:7,e:"div",a:{"class":"row rgb-input"},f:[{t:7,e:"span",a:{"class":"row-field"},f:[{t:7,e:"input",a:{"class":"color-input",min:"0",max:"255",value:[{t:2,r:"colors.red"}]}}]}," ",{t:7,e:"span",a:{"class":"row-field"},f:[{t:7,e:"input",a:{"class":"color-input",min:"0",max:"255",value:[{t:2,r:"colors.green"}]}}]}," ",{t:7,e:"span",a:{"class":"row-field"},f:[{t:7,e:"input",a:{"class":"color-input",min:"0",max:"255",value:[{t:2,r:"colors.blue"}]}}]}," ",{t:7,e:"span",a:{"class":"row-label"},f:[{t:2,x:{r:["hex","colors.red","colors.green","colors.blue"],s:"${0}(Math.round(${1}),Math.round(${2}),Math.round(${3}))"}}]}]}," ",{t:7,e:"div",a:{"class":"row"},f:[{t:7,e:"label",a:{"class":"red row-label color-label","for":"redRange"},f:"Red"}," ",{t:7,e:"span",a:{"class":"row-field range-input"},f:[{t:7,e:"input",a:{name:"rval",id:"redRange",type:"range",min:"0",max:"255",value:[{t:2,r:"colors.red"}]}}]}," ",{t:7,e:"span",a:{"class":"row-label percent-label"},f:[{t:2,x:{r:["colors.red"],s:"Math.round(${0}*(100/255))"}},"%"]}]}," ",{t:7,e:"div",a:{"class":"row"},f:[{t:7,e:"label",a:{"class":"green row-label color-label","for":"greenRange"},f:"Green"}," ",{t:7,e:"span",a:{"class":"row-field range-input"},f:[{t:7,e:"input",a:{name:"rval",id:"greenRange",type:"range",min:"0",max:"255",value:[{t:2,r:"colors.green"}]}}]}," ",{t:7,e:"span",a:{"class":"row-label percent-label"},f:[{t:2,x:{r:["colors.green"],s:"Math.round(${0}*(100/255))"}},"%"]}]}," ",{t:7,e:"div",a:{"class":"row"},f:[{t:7,e:"label",a:{"class":"blue row-label color-label","for":"blueRange"},f:"Blue"}," ",{t:7,e:"span",a:{"class":"row-field range-input"},f:[{t:7,e:"input",a:{name:"bval",id:"blueRange",type:"range",min:"0",max:"255",value:[{t:2,r:"colors.blue"}]}}]}," ",{t:7,e:"span",a:{"class":"row-label percent-label"},f:[{t:2,x:{r:["colors.blue"],s:"Math.round(${0}*(100/255))"}},"%"]}]}," ",{t:7,e:"span",a:{"class":"row"},f:[{t:7,e:"div",a:{"class":"chart",style:["background-color: rgb(",{t:2,x:{r:["colors.red"],s:"Math.round(${0})"}},", ",{t:2,x:{r:["colors.green"],s:"Math.round(${0})"}},", ",{t:2,x:{r:["colors.blue"],s:"Math.round(${0})"}},")"]},f:[{t:7,e:"div",a:{"class":"bar",style:["background-color: #",{t:2,x:{r:["hex","colors.red"],s:"${0}(${1})"}},"0000; width: ",{t:2,x:{r:["colors.red"],s:"${0}*(100/255)"}},"%;"]},f:[{t:2,x:{r:["colors.red"],s:"${0}*(100/255)"}}]}," ",{t:7,e:"div",a:{"class":"bar",style:["background-color: #00",{t:2,x:{r:["hex","colors.green"],s:"${0}(${1})"}},"00; width: ",{t:2,x:{r:["colors.green"],s:"${0}*(100/255)"}},"%;"]},f:[{t:2,x:{r:["colors.green"],s:"${0}*(100/255)"}}]}," ",{t:7,e:"div",a:{"class":"bar",style:["background-color: #0000",{t:2,x:{r:["hex","colors.blue"],s:"${0}(${1})"}},"; width: ",{t:2,x:{r:["colors.blue"],s:"${0}*(100/255)"}},"%;"]},f:[{t:2,x:{r:["colors.blue"],s:"${0}*(100/255)"}}]}]}]}]}),define("app",["ractive","shape","rv!view/main"],function(e,t,n){function r(e){var t=e.toString(16);return t.length===1?"0"+t:t}function i(e,t,n){return"#"+r(e)+r(t)+r(n)}var s=new e({el:"output",template:n,data:{colors:{red:255,green:255,blue:255},hex:function(e,t,n){return arguments.length===1?r(e):i(e,t,n)}}});return s.observe("colors",function(e,n){t.draw(n.red,n.green,n.blue),document.querySelector(".color-result").style.backgroundColor="rgb("+n.red+","+n.green+","+n.blue+")"}),s}),require.config({baseUrl:"js/",deps:["app"],paths:{ractive:["//cdn.ractivejs.org/latest/ractive.min","./libs/ractive.min"],view:"../views","amd-loader":"./plugins/amd-loader",rv:"./plugins/rv"}}),require(["shape"],function(e){e.draw(255,255,255)}),define("loader",function(){});